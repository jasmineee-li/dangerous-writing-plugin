/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DangerousWritingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  sessionDurationMinutes: 5,
  defaultWordCountGoal: 0,
  // 0 means disabled, use duration instead
  idleTimeoutSeconds: 5,
  practiceMode: true,
  warningThresholdSeconds: 1.5,
  showFirstTimeWarning: true,
  penaltyType: "all",
  warningColor: "#ff0000"
};
var DangerousWritingSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  createStatCard(container, label, value) {
    const card = container.createEl("div", {
      cls: "dangerous-writing-stat-card"
    });
    card.createEl("div", { text: value, cls: "stat-value" });
    card.createEl("div", { text: label, cls: "stat-label" });
  }
  formatDuration(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    const secs = seconds % 60;
    if (hours > 0) {
      return `${hours}h ${minutes}m`;
    } else if (minutes > 0) {
      return `${minutes}m ${secs}s`;
    } else {
      return `${secs}s`;
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Zap Settings" });
    new import_obsidian.Setting(containerEl).setName("Default session duration (minutes)").setDesc(
      "Default duration for writing sessions (can be overridden when starting a session)"
    ).addText(
      (text) => text.setPlaceholder("5").setValue(this.plugin.settings.sessionDurationMinutes.toString()).onChange(async (value) => {
        const num = parseInt(value) || 5;
        if (num > 0 && num <= 1440) {
          this.plugin.settings.sessionDurationMinutes = num;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian.Setting(containerEl).setName("Default word count goal").setDesc("Default word count goal (0 = disabled, use duration instead)").addText(
      (text) => text.setPlaceholder("0").setValue(this.plugin.settings.defaultWordCountGoal.toString()).onChange(async (value) => {
        const num = parseInt(value) || 0;
        if (num >= 0 && num <= 1e5) {
          this.plugin.settings.defaultWordCountGoal = num;
          await this.plugin.saveSettings();
        }
      })
    );
    const idleTimeoutSetting = new import_obsidian.Setting(containerEl).setName("Idle timeout (seconds)").setDesc("How long you can stop typing before the penalty triggers").addText(
      (text) => text.setPlaceholder("5").setValue(this.plugin.settings.idleTimeoutSeconds.toString()).onChange(async (value) => {
        const num = parseInt(value) || 5;
        if (num > 0 && num <= 300) {
          this.plugin.settings.idleTimeoutSeconds = num;
          if (this.plugin.settings.warningThresholdSeconds > num) {
            this.plugin.settings.warningThresholdSeconds = num;
          }
          await this.plugin.saveSettings();
          this.display();
        }
      })
    );
    new import_obsidian.Setting(containerEl).setName("Penalty type").setDesc("What gets deleted when you stop typing").addDropdown(
      (dropdown) => dropdown.addOption("all", "Delete entire file").addOption("paragraph", "Delete last paragraph").addOption("sentence", "Delete last sentence").setValue(this.plugin.settings.penaltyType).onChange(async (value) => {
        this.plugin.settings.penaltyType = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Practice mode").setDesc(
      "When enabled, you can recover content after a penalty. Disable for the real dangerous experience!"
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.practiceMode).onChange(async (value) => {
        this.plugin.settings.practiceMode = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Warning threshold (seconds)").setDesc(
      `How long you can be idle before warnings start appearing (max: ${this.plugin.settings.idleTimeoutSeconds}s)`
    ).addText(
      (text) => text.setPlaceholder("1.5").setValue(this.plugin.settings.warningThresholdSeconds.toString()).onChange(async (value) => {
        const num = parseFloat(value) || 1.5;
        const max = this.plugin.settings.idleTimeoutSeconds;
        if (num > 0 && num <= max) {
          this.plugin.settings.warningThresholdSeconds = num;
          await this.plugin.saveSettings();
        } else if (num > max) {
          this.plugin.settings.warningThresholdSeconds = max;
          text.setValue(max.toString());
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian.Setting(containerEl).setName("Warning color").setDesc("Color of the warning overlay when idle time approaches").addColorPicker(
      (color) => color.setValue(this.plugin.settings.warningColor).onChange(async (value) => {
        this.plugin.settings.warningColor = value;
        await this.plugin.saveSettings();
        this.plugin.updateWarningStyles();
      })
    );
    containerEl.createEl("h2", { text: "Statistics" });
    const sessions = this.plugin.sessions || [];
    const now = Date.now();
    const day = 24 * 60 * 60 * 1e3;
    const week = 7 * day;
    const month = 30 * day;
    const todaySessions = sessions.filter((s) => s.timestamp >= now - day);
    const weekSessions = sessions.filter((s) => s.timestamp >= now - week);
    const monthSessions = sessions.filter((s) => s.timestamp >= now - month);
    const totalSessions = sessions.length;
    const completedSessions = sessions.filter((s) => s.completed).length;
    const totalWords = sessions.reduce((sum, s) => sum + s.wordsWritten, 0);
    const totalTime = sessions.reduce((sum, s) => sum + s.durationSeconds, 0);
    const statsContainer = containerEl.createDiv({
      cls: "dangerous-writing-basic-stats"
    });
    if (totalSessions > 0) {
      const statsGrid = statsContainer.createDiv({
        cls: "dangerous-writing-stats-grid"
      });
      this.createStatCard(
        statsGrid,
        "Total Sessions",
        totalSessions.toString()
      );
      this.createStatCard(
        statsGrid,
        "Completed",
        `${completedSessions}/${totalSessions}`
      );
      this.createStatCard(
        statsGrid,
        "Total Words",
        totalWords.toLocaleString()
      );
      this.createStatCard(
        statsGrid,
        "Total Time",
        this.formatDuration(totalTime)
      );
      if (todaySessions.length > 0) {
        const todayWords = todaySessions.reduce(
          (sum, s) => sum + s.wordsWritten,
          0
        );
        this.createStatCard(
          statsGrid,
          "Today",
          `${todaySessions.length} sessions, ${todayWords} words`
        );
      }
    } else {
      statsContainer.createEl("p", {
        text: "No sessions yet. Start writing dangerously!",
        cls: "dangerous-writing-stats-empty"
      });
    }
    new import_obsidian.Setting(containerEl).setName("View all statistics").setDesc("See comprehensive writing history and detailed stats").addButton(
      (btn) => btn.setButtonText("View All Stats").onClick(() => {
        var _a;
        (_a = this.app.setting) == null ? void 0 : _a.close();
        this.plugin.openStatsView();
      })
    );
  }
};

// modal.ts
var import_obsidian2 = require("obsidian");
var SessionConfigModal = class extends import_obsidian2.Modal {
  constructor(app, defaultDuration, defaultWordCount, hasExistingContent, practiceMode, penaltyType, onSubmit) {
    super(app);
    this.result = null;
    this.onSubmit = onSubmit;
    this.durationMinutes = defaultDuration;
    this.wordCountGoal = defaultWordCount;
    this.useWordCount = defaultWordCount > 0;
    this.practiceMode = practiceMode;
    this.penaltyType = penaltyType;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("dw-modal");
    this.setTitle("Start Zap Session");
    const penaltyText = this.penaltyType === "all" ? "everything" : this.penaltyType === "paragraph" ? "the last paragraph" : "the last sentence";
    if (this.practiceMode) {
      contentEl.createEl("p", {
        text: `Practice mode is ON \u2014 stopping will delete ${penaltyText}, but you can recover it.`,
        cls: "dangerous-writing-warning-text"
      });
    } else {
      contentEl.createEl("p", {
        text: `Not in practice mode \u2014 if you stop typing, you lose ${penaltyText}!`,
        cls: "dangerous-writing-warning-text"
      });
    }
    const seg = contentEl.createDiv({ cls: "dw-seg" });
    const minutesBtn = seg.createEl("button", {
      text: "Minutes",
      cls: "dw-seg-btn"
    });
    const wordsBtn = seg.createEl("button", {
      text: "Words",
      cls: "dw-seg-btn"
    });
    const picker = contentEl.createDiv({ cls: "dw-picker" });
    const setActiveChip = (wrap, value) => {
      wrap.querySelectorAll("button.dw-chip").forEach((b) => {
        const btn = b;
        btn.classList.toggle("is-active", btn.dataset.value === String(value));
      });
    };
    const CONFIG = {
      minutes: {
        presets: [5, 10, 15, 20, 30],
        unit: "min",
        get: () => this.durationMinutes || 5,
        set: (n) => this.durationMinutes = n
      },
      words: {
        presets: [100, 250, 500, 750, 1e3],
        unit: "words",
        get: () => this.wordCountGoal > 0 ? this.wordCountGoal : 500,
        set: (n) => this.wordCountGoal = n
      }
    };
    let inputEl = null;
    let chipsWrap = null;
    const renderPicker = (mode) => {
      minutesBtn.classList.toggle("is-active", mode === "minutes");
      wordsBtn.classList.toggle("is-active", mode === "words");
      picker.empty();
      chipsWrap = picker.createDiv({ cls: "dw-chips" });
      for (const preset of CONFIG[mode].presets) {
        const btn = chipsWrap.createEl("button", {
          text: String(preset),
          cls: "dw-chip"
        });
        btn.dataset.value = String(preset);
        btn.onclick = () => {
          CONFIG[mode].set(preset);
          if (inputEl)
            inputEl.value = String(preset);
          if (chipsWrap)
            setActiveChip(chipsWrap, preset);
        };
      }
      const row = picker.createDiv({ cls: "dw-input-row" });
      inputEl = row.createEl("input", {
        type: "text",
        cls: "dw-input",
        value: String(CONFIG[mode].get())
      });
      inputEl.setAttribute("inputmode", "numeric");
      inputEl.addEventListener("input", () => {
        const num = parseInt(inputEl.value);
        if (!isNaN(num) && num > 0) {
          CONFIG[mode].set(num);
          if (chipsWrap)
            setActiveChip(chipsWrap, num);
        }
      });
      row.createEl("span", { text: CONFIG[mode].unit, cls: "dw-unit" });
      setActiveChip(chipsWrap, CONFIG[mode].get());
    };
    const setMode = (mode) => {
      this.useWordCount = mode === "words";
      renderPicker(mode);
    };
    minutesBtn.onclick = () => setMode("minutes");
    wordsBtn.onclick = () => setMode("words");
    setMode(this.useWordCount ? "words" : "minutes");
    const btnRow = contentEl.createDiv({ cls: "dw-btn-row" });
    const cancelBtn = btnRow.createEl("button", {
      text: "Cancel",
      cls: "dw-btn"
    });
    cancelBtn.onclick = () => this.close();
    const startBtn = btnRow.createEl("button", {
      text: "Start Zap Session",
      cls: "dw-btn dw-btn-cta"
    });
    startBtn.onclick = () => {
      if (this.useWordCount && this.wordCountGoal <= 0) {
        new import_obsidian2.Notice("Please enter a valid word count goal");
        return;
      }
      if (!this.useWordCount && this.durationMinutes <= 0) {
        new import_obsidian2.Notice("Please enter a valid duration");
        return;
      }
      this.result = {
        durationMinutes: this.useWordCount ? null : this.durationMinutes,
        wordCountGoal: this.useWordCount ? this.wordCountGoal : null
      };
      this.onSubmit(this.result);
      this.close();
    };
  }
  onClose() {
    this.contentEl.empty();
  }
};
var FirstTimeWarningModal = class extends import_obsidian2.Modal {
  constructor(app, onConfirm) {
    super(app);
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    this.setTitle("\u26A0\uFE0F Zap");
    contentEl.createEl("p", {
      text: "This plugin deletes content if you stop typing. Practice mode is ON by default.",
      cls: "dw-subtitle"
    });
    const list = contentEl.createEl("ul", { cls: "dw-warning-list" });
    list.createEl("li", { text: "Content is recoverable in practice mode" });
    list.createEl("li", { text: "Test in a safe vault first" });
    list.createEl("li", { text: "Switching files may end the session" });
    const btnRow = contentEl.createDiv({ cls: "dw-btn-row" });
    const cancelBtn = btnRow.createEl("button", {
      text: "Cancel",
      cls: "dw-btn"
    });
    cancelBtn.onclick = () => this.close();
    const confirmBtn = btnRow.createEl("button", {
      text: "I Understand",
      cls: "dw-btn dw-btn-cta"
    });
    confirmBtn.onclick = () => {
      this.onConfirm();
      this.close();
    };
  }
  onClose() {
    this.contentEl.empty();
  }
};

// stats.ts
var import_obsidian3 = require("obsidian");
var VIEW_TYPE_STATS = "dangerous-writing-stats";
var StatsView = class extends import_obsidian3.ItemView {
  constructor(leaf, sessions) {
    super(leaf);
    this.sessions = sessions;
  }
  getViewType() {
    return VIEW_TYPE_STATS;
  }
  getDisplayText() {
    return "Zap Stats";
  }
  getIcon() {
    return "bar-chart-2";
  }
  updateSessions(sessions) {
    this.sessions = sessions;
    this.render();
  }
  async onOpen() {
    this.render();
  }
  render() {
    const container = this.containerEl.children[1];
    container.empty();
    container.createEl("h2", { text: "Zap Statistics" });
    const now = Date.now();
    const day = 24 * 60 * 60 * 1e3;
    const week = 7 * day;
    const month = 30 * day;
    const periods = [
      { name: "Today", start: now - day },
      { name: "Past Week", start: now - week },
      { name: "Past Month", start: now - month },
      { name: "All Time", start: 0 }
    ];
    for (const period of periods) {
      const periodSessions = this.sessions.filter(
        (s) => s.timestamp >= period.start
      );
      this.renderPeriodStats(container, period.name, periodSessions);
    }
    container.createEl("h3", { text: "Recent Sessions" });
    if (this.sessions.length === 0) {
      container.createEl("p", {
        text: "No sessions yet. Start a Zap session!",
        cls: "dangerous-writing-stats-empty"
      });
    } else {
      const recentSessions = this.sessions.slice(-10).reverse();
      const list = container.createEl("div", {
        cls: "dangerous-writing-sessions-list"
      });
      for (const session of recentSessions) {
        const item = list.createEl("div", {
          cls: "dangerous-writing-session-item"
        });
        const date = new Date(session.timestamp);
        const status = session.completed ? "\u2705" : "\u274C";
        const duration = this.formatDuration(session.durationSeconds);
        item.createEl("span", {
          text: `${status} ${date.toLocaleDateString()} ${date.toLocaleTimeString(
            [],
            { hour: "2-digit", minute: "2-digit" }
          )}`,
          cls: "session-date"
        });
        item.createEl("span", {
          text: `${session.wordsWritten} words`,
          cls: "session-words"
        });
        item.createEl("span", {
          text: duration,
          cls: "session-duration"
        });
      }
    }
  }
  renderPeriodStats(container, periodName, sessions) {
    const section = container.createEl("div", {
      cls: "dangerous-writing-stats-period"
    });
    section.createEl("h3", { text: periodName });
    const totalSessions = sessions.length;
    const completedSessions = sessions.filter((s) => s.completed).length;
    const totalWords = sessions.reduce((sum, s) => sum + s.wordsWritten, 0);
    const totalTime = sessions.reduce((sum, s) => sum + s.durationSeconds, 0);
    const statsGrid = section.createEl("div", {
      cls: "dangerous-writing-stats-grid"
    });
    this.createStatCard(statsGrid, "Sessions", totalSessions.toString());
    this.createStatCard(
      statsGrid,
      "Completed",
      `${completedSessions}/${totalSessions}`
    );
    this.createStatCard(
      statsGrid,
      "Words Written",
      totalWords.toLocaleString()
    );
    this.createStatCard(
      statsGrid,
      "Time Writing",
      this.formatDuration(totalTime)
    );
    if (totalSessions > 0) {
      const avgWords = Math.round(totalWords / totalSessions);
      const completionRate = Math.round(
        completedSessions / totalSessions * 100
      );
      this.createStatCard(statsGrid, "Avg Words/Session", avgWords.toString());
      this.createStatCard(statsGrid, "Completion Rate", `${completionRate}%`);
    }
  }
  createStatCard(container, label, value) {
    const card = container.createEl("div", {
      cls: "dangerous-writing-stat-card"
    });
    card.createEl("div", { text: value, cls: "stat-value" });
    card.createEl("div", { text: label, cls: "stat-label" });
  }
  formatDuration(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    const secs = seconds % 60;
    if (hours > 0) {
      return `${hours}h ${minutes}m`;
    } else if (minutes > 0) {
      return `${minutes}m ${secs}s`;
    } else {
      return `${secs}s`;
    }
  }
  async onClose() {
  }
};

// main.ts
var DangerousWritingPlugin = class extends import_obsidian4.Plugin {
  constructor() {
    super(...arguments);
    this.sessions = [];
    // Session state
    this.sessionActive = false;
    this.sessionStartTime = 0;
    this.sessionDurationMs = 0;
    this.wordCountGoal = null;
    this.initialWordCount = 0;
    this.activeFile = null;
    this.initialContent = "";
    this.sessionInterval = null;
    // Idle watchdog
    this.idleWatchdogTimeout = null;
    this.lastActivityTime = 0;
    this.lastContentLength = 0;
    this.warningOverlay = null;
    // Status bar
    this.statusBarEl = null;
    this.statusBarInterval = null;
    // Dynamic styles
    this.styleEl = null;
  }
  async onload() {
    await this.loadSettings();
    this.updateWarningStyles();
    this.registerView(
      VIEW_TYPE_STATS,
      (leaf) => new StatsView(leaf, this.sessions)
    );
    if (this.settings.showFirstTimeWarning) {
      new FirstTimeWarningModal(this.app, () => {
        this.settings.showFirstTimeWarning = false;
        this.saveSettings();
      }).open();
    }
    this.addRibbonIcon("zap", "Start Zap Session", (evt) => {
      this.startSession();
    });
    this.addCommand({
      id: "start-dangerous-writing",
      name: "Start Zap writing session",
      callback: () => {
        this.startSession();
      }
    });
    this.addCommand({
      id: "stop-dangerous-writing",
      name: "Stop Zap writing session",
      checkCallback: (checking) => {
        if (checking) {
          return this.sessionActive;
        }
        if (this.sessionActive) {
          this.stopSession(true);
        }
        return true;
      }
    });
    this.addCommand({
      id: "open-dangerous-writing-stats",
      name: "Open writing statistics",
      callback: () => {
        this.openStatsView();
      }
    });
    this.registerEvent(
      this.app.workspace.on(
        "editor-change",
        (editor, info) => {
          if (this.sessionActive) {
            const currentLength = editor.getValue().length;
            if (currentLength > this.lastContentLength) {
              this.resetIdleWatchdog();
            }
            this.lastContentLength = currentLength;
          }
        }
      )
    );
    this.registerEvent(
      this.app.workspace.on(
        "active-leaf-change",
        (leaf) => {
          if (this.sessionActive && leaf) {
            const view = leaf.view;
            if (view instanceof import_obsidian4.MarkdownView) {
              const currentFile = view.file;
              if (this.activeFile && currentFile && currentFile.path !== this.activeFile.path) {
                new import_obsidian4.Notice("Switched files during session - session ended");
                this.stopSession(false);
              }
            }
          }
        }
      )
    );
    this.addSettingTab(new DangerousWritingSettingTab(this.app, this));
    this.statusBarEl = this.addStatusBarItem();
    this.updateStatusBar();
  }
  onunload() {
    if (this.sessionActive) {
      this.stopSession(false);
    }
    this.cleanup();
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_STATS);
  }
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data == null ? void 0 : data.settings);
    this.sessions = (data == null ? void 0 : data.sessions) || [];
  }
  async saveSettings() {
    const data = {
      settings: this.settings,
      sessions: this.sessions
    };
    await this.saveData(data);
  }
  async openStatsView() {
    const existing = this.app.workspace.getLeavesOfType(VIEW_TYPE_STATS);
    if (existing.length) {
      this.app.workspace.revealLeaf(existing[0]);
      return;
    }
    let leaf = this.app.workspace.getRightLeaf(false);
    if (!leaf) {
      leaf = this.app.workspace.getRightLeaf(true);
    }
    if (leaf) {
      await leaf.setViewState({
        type: VIEW_TYPE_STATS,
        active: true
      });
      this.app.workspace.revealLeaf(leaf);
    } else {
      new import_obsidian4.Notice("Unable to open stats view");
    }
  }
  updateWarningStyles() {
    if (this.styleEl) {
      this.styleEl.remove();
    }
    const color = this.settings.warningColor;
    const r = parseInt(color.slice(1, 3), 16);
    const g = parseInt(color.slice(3, 5), 16);
    const b = parseInt(color.slice(5, 7), 16);
    this.styleEl = document.createElement("style");
    this.styleEl.textContent = `
			.dangerous-writing-warning-overlay {
				transition: background-color 0.25s ease-in-out;
			}
		`;
    document.head.appendChild(this.styleEl);
  }
  recordSession(wordsWritten, durationSeconds, completed) {
    const record = {
      timestamp: Date.now(),
      durationSeconds,
      wordsWritten,
      completed
    };
    this.sessions.push(record);
    this.saveSettings();
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_STATS);
    for (const leaf of leaves) {
      if (leaf.view instanceof StatsView) {
        leaf.view.updateSessions(this.sessions);
      }
    }
  }
  showClickableNotice(message, duration = 0) {
    const notice = new import_obsidian4.Notice(message, duration);
    const noticeEl = notice.noticeEl;
    if (noticeEl) {
      noticeEl.style.cursor = "pointer";
      noticeEl.addEventListener("click", () => {
        notice.hide();
      });
    }
    return notice;
  }
  startSession() {
    if (this.sessionActive) {
      new import_obsidian4.Notice("Session already active!");
      return;
    }
    const view = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
    if (!view) {
      new import_obsidian4.Notice("Please open a markdown file to start a session");
      return;
    }
    const file = view.file;
    if (!file) {
      new import_obsidian4.Notice("No file is open");
      return;
    }
    const editor = view.editor;
    const currentContent = editor.getValue();
    const hasExistingContent = currentContent.trim().length > 0;
    new SessionConfigModal(
      this.app,
      this.settings.sessionDurationMinutes,
      this.settings.defaultWordCountGoal,
      hasExistingContent,
      this.settings.practiceMode,
      this.settings.penaltyType,
      (config) => {
        this.beginSession(file, editor, config);
      }
    ).open();
  }
  beginSession(file, editor, config) {
    this.sessionActive = true;
    this.activeFile = file;
    this.initialContent = editor.getValue();
    this.lastContentLength = this.initialContent.length;
    this.initialWordCount = this.countWords(this.initialContent);
    this.sessionStartTime = Date.now();
    if (config.wordCountGoal !== null) {
      this.wordCountGoal = config.wordCountGoal;
      this.sessionDurationMs = 0;
    } else {
      this.wordCountGoal = null;
      this.sessionDurationMs = (config.durationMinutes || 5) * 60 * 1e3;
    }
    const intervalId = window.setInterval(() => {
      if (this.wordCountGoal !== null) {
        const currentWords = this.countWords(editor.getValue());
        if (currentWords - this.initialWordCount >= this.wordCountGoal) {
          this.completeSession();
        } else {
          this.updateStatusBar();
        }
      } else {
        const elapsed = Date.now() - this.sessionStartTime;
        if (elapsed >= this.sessionDurationMs) {
          this.completeSession();
        } else {
          this.updateStatusBar();
        }
      }
    }, 1e3);
    this.sessionInterval = intervalId;
    this.registerInterval(intervalId);
    this.resetIdleWatchdog();
    this.updateStatusBar();
    this.createWarningOverlay();
    if (this.wordCountGoal !== null) {
      new import_obsidian4.Notice(
        `Zap session started! Goal: ${this.wordCountGoal} words. Keep typing!`
      );
    } else {
      const minutes = Math.floor(this.sessionDurationMs / 6e4);
      new import_obsidian4.Notice(`Zap session started! ${minutes} minutes. Keep typing!`);
    }
  }
  resetIdleWatchdog() {
    if (this.idleWatchdogTimeout !== null) {
      window.clearTimeout(this.idleWatchdogTimeout);
      this.idleWatchdogTimeout = null;
    }
    this.lastActivityTime = Date.now();
    if (this.warningOverlay) {
      this.warningOverlay.className = "dangerous-writing-warning-overlay";
      this.warningOverlay.style.backgroundColor = "";
    }
    this.idleWatchdogTimeout = window.setTimeout(() => {
      this.triggerPenalty();
    }, this.settings.idleTimeoutSeconds * 1e3);
    this.startWarningInterval();
  }
  startWarningInterval() {
    const checkInterval = 50;
    const warningThresholdMs = this.settings.warningThresholdSeconds * 1e3;
    const idleTimeoutMs = this.settings.idleTimeoutSeconds * 1e3;
    const color = this.settings.warningColor;
    const r = parseInt(color.slice(1, 3), 16);
    const g = parseInt(color.slice(3, 5), 16);
    const b = parseInt(color.slice(5, 7), 16);
    const warningCheck = window.setInterval(() => {
      if (!this.sessionActive) {
        window.clearInterval(warningCheck);
        return;
      }
      const idleTime = Date.now() - this.lastActivityTime;
      const remaining = idleTimeoutMs - idleTime;
      if (remaining <= 0) {
        window.clearInterval(warningCheck);
        if (this.warningOverlay) {
          this.warningOverlay.style.backgroundColor = "";
        }
        return;
      }
      if (idleTime >= warningThresholdMs && this.warningOverlay) {
        const warningDuration = idleTimeoutMs - warningThresholdMs;
        const progress = (idleTime - warningThresholdMs) / warningDuration;
        const easedProgress = Math.sin(progress * Math.PI / 2);
        const opacity = easedProgress * 0.45;
        this.warningOverlay.style.backgroundColor = `rgba(${r}, ${g}, ${b}, ${opacity})`;
      } else if (idleTime < warningThresholdMs && this.warningOverlay) {
        this.warningOverlay.style.backgroundColor = "";
      }
    }, checkInterval);
  }
  applyPenalty(editor, content) {
    const penaltyType = this.settings.penaltyType;
    if (penaltyType === "all") {
      return "";
    }
    if (penaltyType === "sentence") {
      const sentenceEndings = /[.!?]\s*$/;
      let result = content.trimEnd();
      const lastSentenceMatch = result.match(/[.!?][^.!?]*$/);
      if (lastSentenceMatch) {
        result = result.slice(0, result.length - lastSentenceMatch[0].length);
      } else {
        const lines = result.split("\n");
        if (lines.length > 1) {
          lines.pop();
          result = lines.join("\n");
        } else {
          result = "";
        }
      }
      return result;
    }
    if (penaltyType === "paragraph") {
      const paragraphs = content.split(/\n\n+/);
      if (paragraphs.length > 1) {
        paragraphs.pop();
        return paragraphs.join("\n\n");
      }
      return "";
    }
    return "";
  }
  triggerPenalty() {
    if (!this.sessionActive) {
      return;
    }
    const view = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
    if (!view || view.file !== this.activeFile) {
      return;
    }
    const editor = view.editor;
    const currentContent = editor.getValue();
    const wordsWritten = this.countWords(currentContent);
    const durationSeconds = Math.floor(
      (Date.now() - this.sessionStartTime) / 1e3
    );
    const savedInitialContent = this.initialContent;
    const practiceMode = this.settings.practiceMode;
    const newContent = this.applyPenalty(editor, currentContent);
    editor.setValue(newContent);
    const penaltyTypeText = this.settings.penaltyType === "all" ? "All content" : this.settings.penaltyType === "paragraph" ? "Last paragraph" : "Last sentence";
    this.showClickableNotice(
      `\u26D4 You stopped writing! ${penaltyTypeText} deleted!`,
      0
    );
    this.recordSession(wordsWritten, durationSeconds, false);
    this.stopSession(false);
    if (practiceMode) {
      const recover = confirm(
        "Practice mode: Would you like to restore the original content?"
      );
      if (recover) {
        editor.setValue(savedInitialContent);
        new import_obsidian4.Notice("Content restored");
      }
    }
  }
  completeSession() {
    if (!this.sessionActive) {
      return;
    }
    const view = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
    if (!view || view.file !== this.activeFile) {
      this.stopSession(false);
      return;
    }
    const editor = view.editor;
    const wordsWritten = this.countWords(editor.getValue());
    const durationSeconds = Math.floor(
      (Date.now() - this.sessionStartTime) / 1e3
    );
    this.recordSession(wordsWritten, durationSeconds, true);
    this.stopSession(true);
    const minutes = Math.floor(durationSeconds / 60);
    const seconds = durationSeconds % 60;
    const durationStr = minutes > 0 ? `${minutes}m ${seconds}s` : `${seconds}s`;
    this.showClickableNotice(
      `\u{1F389} Session completed! ${wordsWritten} words in ${durationStr}. (click to close)`,
      0
    );
  }
  stopSession(completed) {
    if (!this.sessionActive) {
      return;
    }
    this.sessionActive = false;
    if (this.sessionInterval !== null) {
      window.clearInterval(this.sessionInterval);
      this.sessionInterval = null;
    }
    if (this.idleWatchdogTimeout !== null) {
      window.clearTimeout(this.idleWatchdogTimeout);
      this.idleWatchdogTimeout = null;
    }
    if (this.statusBarInterval !== null) {
      window.clearInterval(this.statusBarInterval);
      this.statusBarInterval = null;
    }
    this.removeWarningOverlay();
    this.activeFile = null;
    this.initialContent = "";
    this.lastContentLength = 0;
    this.initialWordCount = 0;
    this.wordCountGoal = null;
    this.lastActivityTime = 0;
    this.updateStatusBar();
  }
  createWarningOverlay() {
    if (this.warningOverlay) {
      return;
    }
    this.warningOverlay = document.createElement("div");
    this.warningOverlay.className = "dangerous-writing-warning-overlay";
    document.body.appendChild(this.warningOverlay);
  }
  removeWarningOverlay() {
    if (this.warningOverlay) {
      this.warningOverlay.remove();
      this.warningOverlay = null;
    }
  }
  updateStatusBar() {
    if (!this.statusBarEl) {
      return;
    }
    if (!this.sessionActive) {
      this.statusBarEl.setText("");
      this.statusBarEl.className = "";
      return;
    }
    const idleTime = Date.now() - this.lastActivityTime;
    const idleSeconds = Math.floor(idleTime / 1e3);
    const idleRemaining = Math.max(
      0,
      this.settings.idleTimeoutSeconds - idleSeconds
    );
    let statusText = "";
    if (this.wordCountGoal !== null) {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
      if (view && view.file === this.activeFile) {
        const currentWords = this.countWords(view.editor.getValue());
        const wordsWritten = currentWords - this.initialWordCount;
        const remaining = Math.max(0, this.wordCountGoal - wordsWritten);
        statusText = `\u{1F4DD} ${wordsWritten}/${this.wordCountGoal} words`;
      } else {
        statusText = `\u{1F4DD} Goal: ${this.wordCountGoal} words`;
      }
    } else {
      const elapsed = Date.now() - this.sessionStartTime;
      const remaining = Math.max(0, this.sessionDurationMs - elapsed);
      const remainingMinutes = Math.floor(remaining / 6e4);
      const remainingSeconds = Math.floor(remaining % 6e4 / 1e3);
      statusText = `\u23F1\uFE0F ${remainingMinutes}:${String(remainingSeconds).padStart(
        2,
        "0"
      )}`;
    }
    if (idleSeconds >= this.settings.warningThresholdSeconds) {
      statusText += ` | \u26A0\uFE0F ${idleRemaining}s idle`;
      this.statusBarEl.className = "dangerous-writing-status-bar active warning";
    } else {
      statusText += ` | ${idleRemaining}s idle`;
      this.statusBarEl.className = "dangerous-writing-status-bar active";
    }
    this.statusBarEl.setText(statusText);
  }
  countWords(text) {
    return text.trim().split(/\s+/).filter((word) => word.length > 0).length;
  }
  cleanup() {
    this.removeWarningOverlay();
    if (this.statusBarEl) {
      this.statusBarEl.remove();
      this.statusBarEl = null;
    }
    if (this.styleEl) {
      this.styleEl.remove();
      this.styleEl = null;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzZXR0aW5ncy50cyIsICJtb2RhbC50cyIsICJzdGF0cy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcbiAgRWRpdG9yLFxuICBNYXJrZG93blZpZXcsXG4gIE5vdGljZSxcbiAgUGx1Z2luLFxuICBURmlsZSxcbiAgV29ya3NwYWNlTGVhZixcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1xuICBEYW5nZXJvdXNXcml0aW5nU2V0dGluZ1RhYixcbiAgRGFuZ2Vyb3VzV3JpdGluZ1NldHRpbmdzLFxuICBERUZBVUxUX1NFVFRJTkdTLFxuICBQZW5hbHR5VHlwZSxcbn0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7XG4gIFNlc3Npb25Db25maWdNb2RhbCxcbiAgRmlyc3RUaW1lV2FybmluZ01vZGFsLFxuICBTZXNzaW9uQ29uZmlnLFxufSBmcm9tIFwiLi9tb2RhbFwiO1xuaW1wb3J0IHsgU3RhdHNWaWV3LCBWSUVXX1RZUEVfU1RBVFMsIFNlc3Npb25SZWNvcmQgfSBmcm9tIFwiLi9zdGF0c1wiO1xuXG5pbnRlcmZhY2UgUGx1Z2luRGF0YSB7XG4gIHNldHRpbmdzOiBEYW5nZXJvdXNXcml0aW5nU2V0dGluZ3M7XG4gIHNlc3Npb25zOiBTZXNzaW9uUmVjb3JkW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhbmdlcm91c1dyaXRpbmdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogRGFuZ2Vyb3VzV3JpdGluZ1NldHRpbmdzO1xuICBzZXNzaW9uczogU2Vzc2lvblJlY29yZFtdID0gW107XG5cbiAgLy8gU2Vzc2lvbiBzdGF0ZVxuICBwcml2YXRlIHNlc3Npb25BY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZXNzaW9uU3RhcnRUaW1lOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHNlc3Npb25EdXJhdGlvbk1zOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHdvcmRDb3VudEdvYWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGluaXRpYWxXb3JkQ291bnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgYWN0aXZlRmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbml0aWFsQ29udGVudDogc3RyaW5nID0gXCJcIjtcbiAgcHJpdmF0ZSBzZXNzaW9uSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIC8vIElkbGUgd2F0Y2hkb2dcbiAgcHJpdmF0ZSBpZGxlV2F0Y2hkb2dUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0QWN0aXZpdHlUaW1lOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGxhc3RDb250ZW50TGVuZ3RoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHdhcm5pbmdPdmVybGF5OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gIC8vIFN0YXR1cyBiYXJcbiAgcHJpdmF0ZSBzdGF0dXNCYXJFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNCYXJJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gRHluYW1pYyBzdHlsZXNcbiAgcHJpdmF0ZSBzdHlsZUVsOiBIVE1MU3R5bGVFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBBZGQgZHluYW1pYyB3YXJuaW5nIHN0eWxlc1xuICAgIHRoaXMudXBkYXRlV2FybmluZ1N0eWxlcygpO1xuXG4gICAgLy8gUmVnaXN0ZXIgc3RhdHMgdmlld1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1NUQVRTLFxuICAgICAgKGxlYWYpID0+IG5ldyBTdGF0c1ZpZXcobGVhZiwgdGhpcy5zZXNzaW9ucylcbiAgICApO1xuXG4gICAgLy8gU2hvdyBmaXJzdC10aW1lIHdhcm5pbmcgaWYgbmVlZGVkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ZpcnN0VGltZVdhcm5pbmcpIHtcbiAgICAgIG5ldyBGaXJzdFRpbWVXYXJuaW5nTW9kYWwodGhpcy5hcHAsICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5zaG93Rmlyc3RUaW1lV2FybmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkub3BlbigpO1xuICAgIH1cblxuICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbihcInphcFwiLCBcIlN0YXJ0IFphcCBTZXNzaW9uXCIsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIHRoaXMuc3RhcnRTZXNzaW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgY29tbWFuZFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJzdGFydC1kYW5nZXJvdXMtd3JpdGluZ1wiLFxuICAgICAgbmFtZTogXCJTdGFydCBaYXAgd3JpdGluZyBzZXNzaW9uXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLnN0YXJ0U2Vzc2lvbigpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIEFkZCBjb21tYW5kIHRvIHN0b3Agc2Vzc2lvblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJzdG9wLWRhbmdlcm91cy13cml0aW5nXCIsXG4gICAgICBuYW1lOiBcIlN0b3AgWmFwIHdyaXRpbmcgc2Vzc2lvblwiLFxuICAgICAgY2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGlmIChjaGVja2luZykge1xuICAgICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25BY3RpdmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbkFjdGl2ZSkge1xuICAgICAgICAgIHRoaXMuc3RvcFNlc3Npb24odHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGNvbW1hbmQgdG8gb3BlbiBzdGF0c1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJvcGVuLWRhbmdlcm91cy13cml0aW5nLXN0YXRzXCIsXG4gICAgICBuYW1lOiBcIk9wZW4gd3JpdGluZyBzdGF0aXN0aWNzXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLm9wZW5TdGF0c1ZpZXcoKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciBlZGl0b3IgY2hhbmdlIGV2ZW50XG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKFxuICAgICAgICBcImVkaXRvci1jaGFuZ2VcIixcbiAgICAgICAgKGVkaXRvcjogRWRpdG9yLCBpbmZvOiBNYXJrZG93blZpZXcgfCB7IGZpbGU6IFRGaWxlIH0pID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uQWN0aXZlKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGVuZ3RoID0gZWRpdG9yLmdldFZhbHVlKCkubGVuZ3RoO1xuICAgICAgICAgICAgLy8gT25seSByZXNldCB3YXRjaGRvZyBpZiBjb250ZW50IHdhcyBBRERFRCAobm90IGRlbGV0ZWQgdmlhIGJhY2tzcGFjZSlcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGVuZ3RoID4gdGhpcy5sYXN0Q29udGVudExlbmd0aCkge1xuICAgICAgICAgICAgICB0aGlzLnJlc2V0SWRsZVdhdGNoZG9nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3RDb250ZW50TGVuZ3RoID0gY3VycmVudExlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuXG4gICAgLy8gUmVnaXN0ZXIgYWN0aXZlIGxlYWYgY2hhbmdlIGV2ZW50IChub3RlIHN3aXRjaGluZylcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXG4gICAgICAgIFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsXG4gICAgICAgIChsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLnNlc3Npb25BY3RpdmUgJiYgbGVhZikge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IGxlYWYudmlldztcbiAgICAgICAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gdmlldy5maWxlO1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVGaWxlICYmXG4gICAgICAgICAgICAgICAgY3VycmVudEZpbGUgJiZcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlsZS5wYXRoICE9PSB0aGlzLmFjdGl2ZUZpbGUucGF0aFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU3dpdGNoZWQgZmlsZXMgZHVyaW5nIHNlc3Npb24gLSBzZXNzaW9uIGVuZGVkXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcFNlc3Npb24oZmFsc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcblxuICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IERhbmdlcm91c1dyaXRpbmdTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAvLyBJbml0aWFsaXplIHN0YXR1cyBiYXJcbiAgICB0aGlzLnN0YXR1c0JhckVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIGlmICh0aGlzLnNlc3Npb25BY3RpdmUpIHtcbiAgICAgIHRoaXMuc3RvcFNlc3Npb24oZmFsc2UpO1xuICAgIH1cbiAgICB0aGlzLmNsZWFudXAoKTtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9TVEFUUyk7XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgY29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBsdWdpbkRhdGEgfCBudWxsO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhPy5zZXR0aW5ncyk7XG4gICAgdGhpcy5zZXNzaW9ucyA9IGRhdGE/LnNlc3Npb25zIHx8IFtdO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGNvbnN0IGRhdGE6IFBsdWdpbkRhdGEgPSB7XG4gICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcbiAgICAgIHNlc3Npb25zOiB0aGlzLnNlc3Npb25zLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YShkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIG9wZW5TdGF0c1ZpZXcoKSB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9TVEFUUyk7XG4gICAgaWYgKGV4aXN0aW5nLmxlbmd0aCkge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoZXhpc3RpbmdbMF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgaWYgKCFsZWFmKSB7XG4gICAgICBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKTtcbiAgICB9XG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgdHlwZTogVklFV19UWVBFX1NUQVRTLFxuICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgTm90aWNlKFwiVW5hYmxlIHRvIG9wZW4gc3RhdHMgdmlld1wiKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVXYXJuaW5nU3R5bGVzKCkge1xuICAgIC8vIFJlbW92ZSBleGlzdGluZyBzdHlsZSBlbGVtZW50XG4gICAgaWYgKHRoaXMuc3R5bGVFbCkge1xuICAgICAgdGhpcy5zdHlsZUVsLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbG9yID0gdGhpcy5zZXR0aW5ncy53YXJuaW5nQ29sb3I7XG4gICAgY29uc3QgciA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDEsIDMpLCAxNik7XG4gICAgY29uc3QgZyA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDMsIDUpLCAxNik7XG4gICAgY29uc3QgYiA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDUsIDcpLCAxNik7XG5cbiAgICB0aGlzLnN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgdGhpcy5zdHlsZUVsLnRleHRDb250ZW50ID0gYFxuXHRcdFx0LmRhbmdlcm91cy13cml0aW5nLXdhcm5pbmctb3ZlcmxheSB7XG5cdFx0XHRcdHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4yNXMgZWFzZS1pbi1vdXQ7XG5cdFx0XHR9XG5cdFx0YDtcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVFbCk7XG4gIH1cblxuICBwcml2YXRlIHJlY29yZFNlc3Npb24oXG4gICAgd29yZHNXcml0dGVuOiBudW1iZXIsXG4gICAgZHVyYXRpb25TZWNvbmRzOiBudW1iZXIsXG4gICAgY29tcGxldGVkOiBib29sZWFuXG4gICkge1xuICAgIGNvbnN0IHJlY29yZDogU2Vzc2lvblJlY29yZCA9IHtcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGR1cmF0aW9uU2Vjb25kcyxcbiAgICAgIHdvcmRzV3JpdHRlbixcbiAgICAgIGNvbXBsZXRlZCxcbiAgICB9O1xuICAgIHRoaXMuc2Vzc2lvbnMucHVzaChyZWNvcmQpO1xuICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAvLyBVcGRhdGUgc3RhdHMgdmlldyBpZiBvcGVuXG4gICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfU1RBVFMpO1xuICAgIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcbiAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBTdGF0c1ZpZXcpIHtcbiAgICAgICAgbGVhZi52aWV3LnVwZGF0ZVNlc3Npb25zKHRoaXMuc2Vzc2lvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0NsaWNrYWJsZU5vdGljZShtZXNzYWdlOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIgPSAwKSB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZShtZXNzYWdlLCBkdXJhdGlvbik7XG4gICAgLy8gTWFrZSBub3RpY2UgY2xpY2thYmxlIHRvIGNsb3NlXG4gICAgY29uc3Qgbm90aWNlRWwgPSAobm90aWNlIGFzIGFueSkubm90aWNlRWwgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKG5vdGljZUVsKSB7XG4gICAgICBub3RpY2VFbC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgIG5vdGljZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5vdGljZTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRTZXNzaW9uKCkge1xuICAgIGlmICh0aGlzLnNlc3Npb25BY3RpdmUpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJTZXNzaW9uIGFscmVhZHkgYWN0aXZlIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2Ugb3BlbiBhIG1hcmtkb3duIGZpbGUgdG8gc3RhcnQgYSBzZXNzaW9uXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICBuZXcgTm90aWNlKFwiTm8gZmlsZSBpcyBvcGVuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGZpbGUgaGFzIGNvbnRlbnRcbiAgICBjb25zdCBlZGl0b3IgPSB2aWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIGNvbnN0IGhhc0V4aXN0aW5nQ29udGVudCA9IGN1cnJlbnRDb250ZW50LnRyaW0oKS5sZW5ndGggPiAwO1xuXG4gICAgLy8gT3BlbiBjb25maWd1cmF0aW9uIG1vZGFsICh3YXJuaW5nIHdpbGwgYmUgc2hvd24gaW5zaWRlIG1vZGFsIGlmIG5lZWRlZClcbiAgICBuZXcgU2Vzc2lvbkNvbmZpZ01vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnNldHRpbmdzLnNlc3Npb25EdXJhdGlvbk1pbnV0ZXMsXG4gICAgICB0aGlzLnNldHRpbmdzLmRlZmF1bHRXb3JkQ291bnRHb2FsLFxuICAgICAgaGFzRXhpc3RpbmdDb250ZW50LFxuICAgICAgdGhpcy5zZXR0aW5ncy5wcmFjdGljZU1vZGUsXG4gICAgICB0aGlzLnNldHRpbmdzLnBlbmFsdHlUeXBlLFxuICAgICAgKGNvbmZpZzogU2Vzc2lvbkNvbmZpZykgPT4ge1xuICAgICAgICB0aGlzLmJlZ2luU2Vzc2lvbihmaWxlLCBlZGl0b3IsIGNvbmZpZyk7XG4gICAgICB9XG4gICAgKS5vcGVuKCk7XG4gIH1cblxuICBwcml2YXRlIGJlZ2luU2Vzc2lvbihmaWxlOiBURmlsZSwgZWRpdG9yOiBFZGl0b3IsIGNvbmZpZzogU2Vzc2lvbkNvbmZpZykge1xuICAgIHRoaXMuc2Vzc2lvbkFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5hY3RpdmVGaWxlID0gZmlsZTtcbiAgICB0aGlzLmluaXRpYWxDb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgdGhpcy5sYXN0Q29udGVudExlbmd0aCA9IHRoaXMuaW5pdGlhbENvbnRlbnQubGVuZ3RoO1xuICAgIHRoaXMuaW5pdGlhbFdvcmRDb3VudCA9IHRoaXMuY291bnRXb3Jkcyh0aGlzLmluaXRpYWxDb250ZW50KTtcbiAgICB0aGlzLnNlc3Npb25TdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKGNvbmZpZy53b3JkQ291bnRHb2FsICE9PSBudWxsKSB7XG4gICAgICB0aGlzLndvcmRDb3VudEdvYWwgPSBjb25maWcud29yZENvdW50R29hbDtcbiAgICAgIHRoaXMuc2Vzc2lvbkR1cmF0aW9uTXMgPSAwOyAvLyBObyB0aW1lIGxpbWl0LCBvbmx5IHdvcmQgY291bnRcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53b3JkQ291bnRHb2FsID0gbnVsbDtcbiAgICAgIHRoaXMuc2Vzc2lvbkR1cmF0aW9uTXMgPSAoY29uZmlnLmR1cmF0aW9uTWludXRlcyB8fCA1KSAqIDYwICogMTAwMDtcbiAgICB9XG5cbiAgICAvLyBTdGFydCBzZXNzaW9uIHRpbWVyL2NoZWNrZXJcbiAgICBjb25zdCBpbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLndvcmRDb3VudEdvYWwgIT09IG51bGwpIHtcbiAgICAgICAgLy8gQ2hlY2sgd29yZCBjb3VudCBnb2FsXG4gICAgICAgIGNvbnN0IGN1cnJlbnRXb3JkcyA9IHRoaXMuY291bnRXb3JkcyhlZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgICAgIGlmIChjdXJyZW50V29yZHMgLSB0aGlzLmluaXRpYWxXb3JkQ291bnQgPj0gdGhpcy53b3JkQ291bnRHb2FsKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZVNlc3Npb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDaGVjayBkdXJhdGlvblxuICAgICAgICBjb25zdCBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIHRoaXMuc2Vzc2lvblN0YXJ0VGltZTtcbiAgICAgICAgaWYgKGVsYXBzZWQgPj0gdGhpcy5zZXNzaW9uRHVyYXRpb25Ncykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGVTZXNzaW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwMDApO1xuICAgIHRoaXMuc2Vzc2lvbkludGVydmFsID0gaW50ZXJ2YWxJZDtcbiAgICB0aGlzLnJlZ2lzdGVySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG5cbiAgICAvLyBTdGFydCBpZGxlIHdhdGNoZG9nXG4gICAgdGhpcy5yZXNldElkbGVXYXRjaGRvZygpO1xuXG4gICAgLy8gVXBkYXRlIHN0YXR1cyBiYXJcbiAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuXG4gICAgLy8gQ3JlYXRlIHdhcm5pbmcgb3ZlcmxheVxuICAgIHRoaXMuY3JlYXRlV2FybmluZ092ZXJsYXkoKTtcblxuICAgIGlmICh0aGlzLndvcmRDb3VudEdvYWwgIT09IG51bGwpIHtcbiAgICAgIG5ldyBOb3RpY2UoXG4gICAgICAgIGBaYXAgc2Vzc2lvbiBzdGFydGVkISBHb2FsOiAke3RoaXMud29yZENvdW50R29hbH0gd29yZHMuIEtlZXAgdHlwaW5nIWBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRoaXMuc2Vzc2lvbkR1cmF0aW9uTXMgLyA2MDAwMCk7XG4gICAgICBuZXcgTm90aWNlKGBaYXAgc2Vzc2lvbiBzdGFydGVkISAke21pbnV0ZXN9IG1pbnV0ZXMuIEtlZXAgdHlwaW5nIWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRJZGxlV2F0Y2hkb2coKSB7XG4gICAgLy8gQ2xlYXIgZXhpc3RpbmcgdGltZW91dFxuICAgIGlmICh0aGlzLmlkbGVXYXRjaGRvZ1RpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5pZGxlV2F0Y2hkb2dUaW1lb3V0KTtcbiAgICAgIHRoaXMuaWRsZVdhdGNoZG9nVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5sYXN0QWN0aXZpdHlUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIC8vIENsZWFyIHdhcm5pbmcgb3ZlcmxheVxuICAgIGlmICh0aGlzLndhcm5pbmdPdmVybGF5KSB7XG4gICAgICB0aGlzLndhcm5pbmdPdmVybGF5LmNsYXNzTmFtZSA9IFwiZGFuZ2Vyb3VzLXdyaXRpbmctd2FybmluZy1vdmVybGF5XCI7XG4gICAgICB0aGlzLndhcm5pbmdPdmVybGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiXCI7XG4gICAgfVxuXG4gICAgLy8gU2V0IG5ldyB0aW1lb3V0XG4gICAgdGhpcy5pZGxlV2F0Y2hkb2dUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyUGVuYWx0eSgpO1xuICAgIH0sIHRoaXMuc2V0dGluZ3MuaWRsZVRpbWVvdXRTZWNvbmRzICogMTAwMCk7XG5cbiAgICAvLyBTdGFydCB3YXJuaW5nIGludGVydmFsXG4gICAgdGhpcy5zdGFydFdhcm5pbmdJbnRlcnZhbCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydFdhcm5pbmdJbnRlcnZhbCgpIHtcbiAgICAvLyBDaGVjayBldmVyeSA1MG1zIGZvciBzbW9vdGggcHJvZ3Jlc3Npb25cbiAgICBjb25zdCBjaGVja0ludGVydmFsID0gNTA7XG4gICAgY29uc3Qgd2FybmluZ1RocmVzaG9sZE1zID0gdGhpcy5zZXR0aW5ncy53YXJuaW5nVGhyZXNob2xkU2Vjb25kcyAqIDEwMDA7XG4gICAgY29uc3QgaWRsZVRpbWVvdXRNcyA9IHRoaXMuc2V0dGluZ3MuaWRsZVRpbWVvdXRTZWNvbmRzICogMTAwMDtcbiAgICBjb25zdCBjb2xvciA9IHRoaXMuc2V0dGluZ3Mud2FybmluZ0NvbG9yO1xuICAgIGNvbnN0IHIgPSBwYXJzZUludChjb2xvci5zbGljZSgxLCAzKSwgMTYpO1xuICAgIGNvbnN0IGcgPSBwYXJzZUludChjb2xvci5zbGljZSgzLCA1KSwgMTYpO1xuICAgIGNvbnN0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuXG4gICAgY29uc3Qgd2FybmluZ0NoZWNrID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5zZXNzaW9uQWN0aXZlKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHdhcm5pbmdDaGVjayk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaWRsZVRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5sYXN0QWN0aXZpdHlUaW1lO1xuICAgICAgY29uc3QgcmVtYWluaW5nID0gaWRsZVRpbWVvdXRNcyAtIGlkbGVUaW1lO1xuXG4gICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwod2FybmluZ0NoZWNrKTtcbiAgICAgICAgaWYgKHRoaXMud2FybmluZ092ZXJsYXkpIHtcbiAgICAgICAgICB0aGlzLndhcm5pbmdPdmVybGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGFydCB3YXJuaW5nIHdoZW4gdXNlciBoYXMgYmVlbiBpZGxlIGZvciB3YXJuaW5nVGhyZXNob2xkIHNlY29uZHNcbiAgICAgIC8vIChpLmUuLCB3aGVuIHJlbWFpbmluZyA8PSBpZGxlVGltZW91dCAtIHdhcm5pbmdUaHJlc2hvbGQpXG4gICAgICBpZiAoaWRsZVRpbWUgPj0gd2FybmluZ1RocmVzaG9sZE1zICYmIHRoaXMud2FybmluZ092ZXJsYXkpIHtcbiAgICAgICAgLy8gUHJvZ3Jlc3MgZnJvbSAwICh3aGVuIGlkbGUgZm9yIHdhcm5pbmdUaHJlc2hvbGQpIHRvIDEgKHdoZW4gaWRsZSBmb3IgaWRsZVRpbWVvdXQpXG4gICAgICAgIGNvbnN0IHdhcm5pbmdEdXJhdGlvbiA9IGlkbGVUaW1lb3V0TXMgLSB3YXJuaW5nVGhyZXNob2xkTXM7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gKGlkbGVUaW1lIC0gd2FybmluZ1RocmVzaG9sZE1zKSAvIHdhcm5pbmdEdXJhdGlvbjtcbiAgICAgICAgLy8gVXNlIHNpbmUgZWFzaW5nIGZvciB2ZXJ5IHNtb290aCwgZ3JhZHVhbCB0cmFuc2l0aW9uXG4gICAgICAgIGNvbnN0IGVhc2VkUHJvZ3Jlc3MgPSBNYXRoLnNpbigocHJvZ3Jlc3MgKiBNYXRoLlBJKSAvIDIpO1xuICAgICAgICAvLyBPcGFjaXR5IHJhbmdlcyBmcm9tIDAgdG8gMC40NSAtIHN0YXJ0cyBpbnZpc2libGUsIHJhbXBzIHVwIHNtb290aGx5XG4gICAgICAgIGNvbnN0IG9wYWNpdHkgPSBlYXNlZFByb2dyZXNzICogMC40NTtcbiAgICAgICAgdGhpcy53YXJuaW5nT3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAke29wYWNpdHl9KWA7XG4gICAgICB9IGVsc2UgaWYgKGlkbGVUaW1lIDwgd2FybmluZ1RocmVzaG9sZE1zICYmIHRoaXMud2FybmluZ092ZXJsYXkpIHtcbiAgICAgICAgdGhpcy53YXJuaW5nT3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIlwiO1xuICAgICAgfVxuICAgIH0sIGNoZWNrSW50ZXJ2YWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVBlbmFsdHkoZWRpdG9yOiBFZGl0b3IsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgcGVuYWx0eVR5cGUgPSB0aGlzLnNldHRpbmdzLnBlbmFsdHlUeXBlO1xuXG4gICAgaWYgKHBlbmFsdHlUeXBlID09PSBcImFsbFwiKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICBpZiAocGVuYWx0eVR5cGUgPT09IFwic2VudGVuY2VcIikge1xuICAgICAgLy8gUmVtb3ZlIGxhc3Qgc2VudGVuY2UgKGVuZHMgd2l0aCAuICEgPyBvciBuZXdsaW5lIGZvbGxvd2VkIGJ5IGNvbnRlbnQpXG4gICAgICBjb25zdCBzZW50ZW5jZUVuZGluZ3MgPSAvWy4hP11cXHMqJC87XG4gICAgICBsZXQgcmVzdWx0ID0gY29udGVudC50cmltRW5kKCk7XG5cbiAgICAgIC8vIEZpbmQgdGhlIGxhc3Qgc2VudGVuY2UgZW5kaW5nXG4gICAgICBjb25zdCBsYXN0U2VudGVuY2VNYXRjaCA9IHJlc3VsdC5tYXRjaCgvWy4hP11bXi4hP10qJC8pO1xuICAgICAgaWYgKGxhc3RTZW50ZW5jZU1hdGNoKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCByZXN1bHQubGVuZ3RoIC0gbGFzdFNlbnRlbmNlTWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIHNlbnRlbmNlIGVuZGluZyBmb3VuZCwgcmVtb3ZlIGxhc3QgbGluZVxuICAgICAgICBjb25zdCBsaW5lcyA9IHJlc3VsdC5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBsaW5lcy5wb3AoKTtcbiAgICAgICAgICByZXN1bHQgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgaWYgKHBlbmFsdHlUeXBlID09PSBcInBhcmFncmFwaFwiKSB7XG4gICAgICAvLyBSZW1vdmUgbGFzdCBwYXJhZ3JhcGggKHNlcGFyYXRlZCBieSBkb3VibGUgbmV3bGluZSlcbiAgICAgIGNvbnN0IHBhcmFncmFwaHMgPSBjb250ZW50LnNwbGl0KC9cXG5cXG4rLyk7XG4gICAgICBpZiAocGFyYWdyYXBocy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHBhcmFncmFwaHMucG9wKCk7XG4gICAgICAgIHJldHVybiBwYXJhZ3JhcGhzLmpvaW4oXCJcXG5cXG5cIik7XG4gICAgICB9XG4gICAgICAvLyBPbmx5IG9uZSBwYXJhZ3JhcGgsIHJlbW92ZSBpdCBhbGxcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyUGVuYWx0eSgpIHtcbiAgICBpZiAoIXRoaXMuc2Vzc2lvbkFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGlmICghdmlldyB8fCB2aWV3LmZpbGUgIT09IHRoaXMuYWN0aXZlRmlsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVkaXRvciA9IHZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgY29uc3Qgd29yZHNXcml0dGVuID0gdGhpcy5jb3VudFdvcmRzKGN1cnJlbnRDb250ZW50KTtcbiAgICBjb25zdCBkdXJhdGlvblNlY29uZHMgPSBNYXRoLmZsb29yKFxuICAgICAgKERhdGUubm93KCkgLSB0aGlzLnNlc3Npb25TdGFydFRpbWUpIC8gMTAwMFxuICAgICk7XG5cbiAgICAvLyBTYXZlIGluaXRpYWwgY29udGVudCBiZWZvcmUgc3RvcHBpbmcgc2Vzc2lvbiAod2hpY2ggY2xlYXJzIGl0KVxuICAgIGNvbnN0IHNhdmVkSW5pdGlhbENvbnRlbnQgPSB0aGlzLmluaXRpYWxDb250ZW50O1xuICAgIGNvbnN0IHByYWN0aWNlTW9kZSA9IHRoaXMuc2V0dGluZ3MucHJhY3RpY2VNb2RlO1xuXG4gICAgLy8gQXBwbHkgdGhlIHBlbmFsdHkgYmFzZWQgb24gc2V0dGluZ3NcbiAgICBjb25zdCBuZXdDb250ZW50ID0gdGhpcy5hcHBseVBlbmFsdHkoZWRpdG9yLCBjdXJyZW50Q29udGVudCk7XG4gICAgZWRpdG9yLnNldFZhbHVlKG5ld0NvbnRlbnQpO1xuXG4gICAgLy8gU2hvdyBwZW5hbHR5IG5vdGljZSB3aXRoIGRldGFpbHNcbiAgICBjb25zdCBwZW5hbHR5VHlwZVRleHQgPVxuICAgICAgdGhpcy5zZXR0aW5ncy5wZW5hbHR5VHlwZSA9PT0gXCJhbGxcIlxuICAgICAgICA/IFwiQWxsIGNvbnRlbnRcIlxuICAgICAgICA6IHRoaXMuc2V0dGluZ3MucGVuYWx0eVR5cGUgPT09IFwicGFyYWdyYXBoXCJcbiAgICAgICAgPyBcIkxhc3QgcGFyYWdyYXBoXCJcbiAgICAgICAgOiBcIkxhc3Qgc2VudGVuY2VcIjtcbiAgICB0aGlzLnNob3dDbGlja2FibGVOb3RpY2UoXG4gICAgICBgXHUyNkQ0IFlvdSBzdG9wcGVkIHdyaXRpbmchICR7cGVuYWx0eVR5cGVUZXh0fSBkZWxldGVkIWAsXG4gICAgICAwXG4gICAgKTtcblxuICAgIC8vIFJlY29yZCBzZXNzaW9uXG4gICAgdGhpcy5yZWNvcmRTZXNzaW9uKHdvcmRzV3JpdHRlbiwgZHVyYXRpb25TZWNvbmRzLCBmYWxzZSk7XG5cbiAgICAvLyBTdG9wIHNlc3Npb25cbiAgICB0aGlzLnN0b3BTZXNzaW9uKGZhbHNlKTtcblxuICAgIC8vIFNob3cgcmVjb3Zlcnkgb3B0aW9uIGlmIGluIHByYWN0aWNlIG1vZGVcbiAgICBpZiAocHJhY3RpY2VNb2RlKSB7XG4gICAgICBjb25zdCByZWNvdmVyID0gY29uZmlybShcbiAgICAgICAgXCJQcmFjdGljZSBtb2RlOiBXb3VsZCB5b3UgbGlrZSB0byByZXN0b3JlIHRoZSBvcmlnaW5hbCBjb250ZW50P1wiXG4gICAgICApO1xuICAgICAgaWYgKHJlY292ZXIpIHtcbiAgICAgICAgZWRpdG9yLnNldFZhbHVlKHNhdmVkSW5pdGlhbENvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKFwiQ29udGVudCByZXN0b3JlZFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbXBsZXRlU2Vzc2lvbigpIHtcbiAgICBpZiAoIXRoaXMuc2Vzc2lvbkFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGlmICghdmlldyB8fCB2aWV3LmZpbGUgIT09IHRoaXMuYWN0aXZlRmlsZSkge1xuICAgICAgdGhpcy5zdG9wU2Vzc2lvbihmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZWRpdG9yID0gdmlldy5lZGl0b3I7XG4gICAgY29uc3Qgd29yZHNXcml0dGVuID0gdGhpcy5jb3VudFdvcmRzKGVkaXRvci5nZXRWYWx1ZSgpKTtcbiAgICBjb25zdCBkdXJhdGlvblNlY29uZHMgPSBNYXRoLmZsb29yKFxuICAgICAgKERhdGUubm93KCkgLSB0aGlzLnNlc3Npb25TdGFydFRpbWUpIC8gMTAwMFxuICAgICk7XG5cbiAgICAvLyBSZWNvcmQgc2Vzc2lvblxuICAgIHRoaXMucmVjb3JkU2Vzc2lvbih3b3Jkc1dyaXR0ZW4sIGR1cmF0aW9uU2Vjb25kcywgdHJ1ZSk7XG5cbiAgICB0aGlzLnN0b3BTZXNzaW9uKHRydWUpO1xuXG4gICAgLy8gU2hvdyBjbGlja2FibGUgbm90aWNlIHdpdGggc3RhdHNcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihkdXJhdGlvblNlY29uZHMgLyA2MCk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IGR1cmF0aW9uU2Vjb25kcyAlIDYwO1xuICAgIGNvbnN0IGR1cmF0aW9uU3RyID0gbWludXRlcyA+IDAgPyBgJHttaW51dGVzfW0gJHtzZWNvbmRzfXNgIDogYCR7c2Vjb25kc31zYDtcbiAgICB0aGlzLnNob3dDbGlja2FibGVOb3RpY2UoXG4gICAgICBgXHVEODNDXHVERjg5IFNlc3Npb24gY29tcGxldGVkISAke3dvcmRzV3JpdHRlbn0gd29yZHMgaW4gJHtkdXJhdGlvblN0cn0uIChjbGljayB0byBjbG9zZSlgLFxuICAgICAgMFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHN0b3BTZXNzaW9uKGNvbXBsZXRlZDogYm9vbGVhbikge1xuICAgIGlmICghdGhpcy5zZXNzaW9uQWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXNzaW9uQWN0aXZlID0gZmFsc2U7XG5cbiAgICAvLyBDbGVhciBpbnRlcnZhbHMgYW5kIHRpbWVvdXRzXG4gICAgaWYgKHRoaXMuc2Vzc2lvbkludGVydmFsICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNlc3Npb25JbnRlcnZhbCk7XG4gICAgICB0aGlzLnNlc3Npb25JbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaWRsZVdhdGNoZG9nVGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmlkbGVXYXRjaGRvZ1RpbWVvdXQpO1xuICAgICAgdGhpcy5pZGxlV2F0Y2hkb2dUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNCYXJJbnRlcnZhbCAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5zdGF0dXNCYXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnN0YXR1c0JhckludGVydmFsID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgd2FybmluZyBvdmVybGF5XG4gICAgdGhpcy5yZW1vdmVXYXJuaW5nT3ZlcmxheSgpO1xuXG4gICAgLy8gUmVzZXQgc3RhdGVcbiAgICB0aGlzLmFjdGl2ZUZpbGUgPSBudWxsO1xuICAgIHRoaXMuaW5pdGlhbENvbnRlbnQgPSBcIlwiO1xuICAgIHRoaXMubGFzdENvbnRlbnRMZW5ndGggPSAwO1xuICAgIHRoaXMuaW5pdGlhbFdvcmRDb3VudCA9IDA7XG4gICAgdGhpcy53b3JkQ291bnRHb2FsID0gbnVsbDtcbiAgICB0aGlzLmxhc3RBY3Rpdml0eVRpbWUgPSAwO1xuXG4gICAgLy8gVXBkYXRlIHN0YXR1cyBiYXJcbiAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVXYXJuaW5nT3ZlcmxheSgpIHtcbiAgICBpZiAodGhpcy53YXJuaW5nT3ZlcmxheSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMud2FybmluZ092ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMud2FybmluZ092ZXJsYXkuY2xhc3NOYW1lID0gXCJkYW5nZXJvdXMtd3JpdGluZy13YXJuaW5nLW92ZXJsYXlcIjtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMud2FybmluZ092ZXJsYXkpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVXYXJuaW5nT3ZlcmxheSgpIHtcbiAgICBpZiAodGhpcy53YXJuaW5nT3ZlcmxheSkge1xuICAgICAgdGhpcy53YXJuaW5nT3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgIHRoaXMud2FybmluZ092ZXJsYXkgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdHVzQmFyKCkge1xuICAgIGlmICghdGhpcy5zdGF0dXNCYXJFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zZXNzaW9uQWN0aXZlKSB7XG4gICAgICB0aGlzLnN0YXR1c0JhckVsLnNldFRleHQoXCJcIik7XG4gICAgICB0aGlzLnN0YXR1c0JhckVsLmNsYXNzTmFtZSA9IFwiXCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIGlkbGUgdGltZVxuICAgIGNvbnN0IGlkbGVUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdEFjdGl2aXR5VGltZTtcbiAgICBjb25zdCBpZGxlU2Vjb25kcyA9IE1hdGguZmxvb3IoaWRsZVRpbWUgLyAxMDAwKTtcbiAgICBjb25zdCBpZGxlUmVtYWluaW5nID0gTWF0aC5tYXgoXG4gICAgICAwLFxuICAgICAgdGhpcy5zZXR0aW5ncy5pZGxlVGltZW91dFNlY29uZHMgLSBpZGxlU2Vjb25kc1xuICAgICk7XG5cbiAgICBsZXQgc3RhdHVzVGV4dCA9IFwiXCI7XG5cbiAgICBpZiAodGhpcy53b3JkQ291bnRHb2FsICE9PSBudWxsKSB7XG4gICAgICAvLyBXb3JkIGNvdW50IG1vZGVcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgaWYgKHZpZXcgJiYgdmlldy5maWxlID09PSB0aGlzLmFjdGl2ZUZpbGUpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFdvcmRzID0gdGhpcy5jb3VudFdvcmRzKHZpZXcuZWRpdG9yLmdldFZhbHVlKCkpO1xuICAgICAgICBjb25zdCB3b3Jkc1dyaXR0ZW4gPSBjdXJyZW50V29yZHMgLSB0aGlzLmluaXRpYWxXb3JkQ291bnQ7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIHRoaXMud29yZENvdW50R29hbCAtIHdvcmRzV3JpdHRlbik7XG4gICAgICAgIHN0YXR1c1RleHQgPSBgXHVEODNEXHVEQ0REICR7d29yZHNXcml0dGVufS8ke3RoaXMud29yZENvdW50R29hbH0gd29yZHNgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdHVzVGV4dCA9IGBcdUQ4M0RcdURDREQgR29hbDogJHt0aGlzLndvcmRDb3VudEdvYWx9IHdvcmRzYDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHVyYXRpb24gbW9kZVxuICAgICAgY29uc3QgZWxhcHNlZCA9IERhdGUubm93KCkgLSB0aGlzLnNlc3Npb25TdGFydFRpbWU7XG4gICAgICBjb25zdCByZW1haW5pbmcgPSBNYXRoLm1heCgwLCB0aGlzLnNlc3Npb25EdXJhdGlvbk1zIC0gZWxhcHNlZCk7XG4gICAgICBjb25zdCByZW1haW5pbmdNaW51dGVzID0gTWF0aC5mbG9vcihyZW1haW5pbmcgLyA2MDAwMCk7XG4gICAgICBjb25zdCByZW1haW5pbmdTZWNvbmRzID0gTWF0aC5mbG9vcigocmVtYWluaW5nICUgNjAwMDApIC8gMTAwMCk7XG4gICAgICBzdGF0dXNUZXh0ID0gYFx1MjNGMVx1RkUwRiAke3JlbWFpbmluZ01pbnV0ZXN9OiR7U3RyaW5nKHJlbWFpbmluZ1NlY29uZHMpLnBhZFN0YXJ0KFxuICAgICAgICAyLFxuICAgICAgICBcIjBcIlxuICAgICAgKX1gO1xuICAgIH1cblxuICAgIC8vIFNob3cgd2FybmluZyB3aGVuIHVzZXIgaGFzIGJlZW4gaWRsZSBmb3Igd2FybmluZ1RocmVzaG9sZFNlY29uZHNcbiAgICAvLyAoaS5lLiwgd2hlbiBpZGxlU2Vjb25kcyA+PSB3YXJuaW5nVGhyZXNob2xkU2Vjb25kcylcbiAgICBpZiAoaWRsZVNlY29uZHMgPj0gdGhpcy5zZXR0aW5ncy53YXJuaW5nVGhyZXNob2xkU2Vjb25kcykge1xuICAgICAgc3RhdHVzVGV4dCArPSBgIHwgXHUyNkEwXHVGRTBGICR7aWRsZVJlbWFpbmluZ31zIGlkbGVgO1xuICAgICAgdGhpcy5zdGF0dXNCYXJFbC5jbGFzc05hbWUgPVxuICAgICAgICBcImRhbmdlcm91cy13cml0aW5nLXN0YXR1cy1iYXIgYWN0aXZlIHdhcm5pbmdcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdHVzVGV4dCArPSBgIHwgJHtpZGxlUmVtYWluaW5nfXMgaWRsZWA7XG4gICAgICB0aGlzLnN0YXR1c0JhckVsLmNsYXNzTmFtZSA9IFwiZGFuZ2Vyb3VzLXdyaXRpbmctc3RhdHVzLWJhciBhY3RpdmVcIjtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXR1c0JhckVsLnNldFRleHQoc3RhdHVzVGV4dCk7XG4gIH1cblxuICBwcml2YXRlIGNvdW50V29yZHModGV4dDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KC9cXHMrLylcbiAgICAgIC5maWx0ZXIoKHdvcmQpID0+IHdvcmQubGVuZ3RoID4gMCkubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwKCkge1xuICAgIHRoaXMucmVtb3ZlV2FybmluZ092ZXJsYXkoKTtcbiAgICBpZiAodGhpcy5zdGF0dXNCYXJFbCkge1xuICAgICAgdGhpcy5zdGF0dXNCYXJFbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuc3RhdHVzQmFyRWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdHlsZUVsKSB7XG4gICAgICB0aGlzLnN0eWxlRWwucmVtb3ZlKCk7XG4gICAgICB0aGlzLnN0eWxlRWwgPSBudWxsO1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCBEYW5nZXJvdXNXcml0aW5nUGx1Z2luIGZyb20gXCIuL21haW5cIjtcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgdHlwZSBQZW5hbHR5VHlwZSA9IFwiYWxsXCIgfCBcInBhcmFncmFwaFwiIHwgXCJzZW50ZW5jZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhbmdlcm91c1dyaXRpbmdTZXR0aW5ncyB7XG4gIHNlc3Npb25EdXJhdGlvbk1pbnV0ZXM6IG51bWJlcjtcbiAgZGVmYXVsdFdvcmRDb3VudEdvYWw6IG51bWJlcjtcbiAgaWRsZVRpbWVvdXRTZWNvbmRzOiBudW1iZXI7XG4gIHByYWN0aWNlTW9kZTogYm9vbGVhbjtcbiAgd2FybmluZ1RocmVzaG9sZFNlY29uZHM6IG51bWJlcjtcbiAgc2hvd0ZpcnN0VGltZVdhcm5pbmc6IGJvb2xlYW47XG4gIHBlbmFsdHlUeXBlOiBQZW5hbHR5VHlwZTtcbiAgd2FybmluZ0NvbG9yOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBEYW5nZXJvdXNXcml0aW5nU2V0dGluZ3MgPSB7XG4gIHNlc3Npb25EdXJhdGlvbk1pbnV0ZXM6IDUsXG4gIGRlZmF1bHRXb3JkQ291bnRHb2FsOiAwLCAvLyAwIG1lYW5zIGRpc2FibGVkLCB1c2UgZHVyYXRpb24gaW5zdGVhZFxuICBpZGxlVGltZW91dFNlY29uZHM6IDUsXG4gIHByYWN0aWNlTW9kZTogdHJ1ZSxcbiAgd2FybmluZ1RocmVzaG9sZFNlY29uZHM6IDEuNSxcbiAgc2hvd0ZpcnN0VGltZVdhcm5pbmc6IHRydWUsXG4gIHBlbmFsdHlUeXBlOiBcImFsbFwiLFxuICB3YXJuaW5nQ29sb3I6IFwiI2ZmMDAwMFwiLFxufTtcblxuZXhwb3J0IGNsYXNzIERhbmdlcm91c1dyaXRpbmdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogRGFuZ2Vyb3VzV3JpdGluZ1BsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEYW5nZXJvdXNXcml0aW5nUGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTdGF0Q2FyZChjb250YWluZXI6IEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJkYW5nZXJvdXMtd3JpdGluZy1zdGF0LWNhcmRcIixcbiAgICB9KTtcbiAgICBjYXJkLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogdmFsdWUsIGNsczogXCJzdGF0LXZhbHVlXCIgfSk7XG4gICAgY2FyZC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGxhYmVsLCBjbHM6IFwic3RhdC1sYWJlbFwiIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXREdXJhdGlvbihzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICBjb25zdCBzZWNzID0gc2Vjb25kcyAlIDYwO1xuXG4gICAgaWYgKGhvdXJzID4gMCkge1xuICAgICAgcmV0dXJuIGAke2hvdXJzfWggJHttaW51dGVzfW1gO1xuICAgIH0gZWxzZSBpZiAobWludXRlcyA+IDApIHtcbiAgICAgIHJldHVybiBgJHttaW51dGVzfW0gJHtzZWNzfXNgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYCR7c2Vjc31zYDtcbiAgICB9XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiWmFwIFNldHRpbmdzXCIgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCBzZXNzaW9uIGR1cmF0aW9uIChtaW51dGVzKVwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiRGVmYXVsdCBkdXJhdGlvbiBmb3Igd3JpdGluZyBzZXNzaW9ucyAoY2FuIGJlIG92ZXJyaWRkZW4gd2hlbiBzdGFydGluZyBhIHNlc3Npb24pXCJcbiAgICAgIClcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiNVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXNzaW9uRHVyYXRpb25NaW51dGVzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpIHx8IDU7XG4gICAgICAgICAgICBpZiAobnVtID4gMCAmJiBudW0gPD0gMTQ0MCkge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXNzaW9uRHVyYXRpb25NaW51dGVzID0gbnVtO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IHdvcmQgY291bnQgZ29hbFwiKVxuICAgICAgLnNldERlc2MoXCJEZWZhdWx0IHdvcmQgY291bnQgZ29hbCAoMCA9IGRpc2FibGVkLCB1c2UgZHVyYXRpb24gaW5zdGVhZClcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMFwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0V29yZENvdW50R29hbC50b1N0cmluZygpKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKSB8fCAwO1xuICAgICAgICAgICAgaWYgKG51bSA+PSAwICYmIG51bSA8PSAxMDAwMDApIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFdvcmRDb3VudEdvYWwgPSBudW07XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgY29uc3QgaWRsZVRpbWVvdXRTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIklkbGUgdGltZW91dCAoc2Vjb25kcylcIilcbiAgICAgIC5zZXREZXNjKFwiSG93IGxvbmcgeW91IGNhbiBzdG9wIHR5cGluZyBiZWZvcmUgdGhlIHBlbmFsdHkgdHJpZ2dlcnNcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiNVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZGxlVGltZW91dFNlY29uZHMudG9TdHJpbmcoKSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSkgfHwgNTtcbiAgICAgICAgICAgIGlmIChudW0gPiAwICYmIG51bSA8PSAzMDApIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWRsZVRpbWVvdXRTZWNvbmRzID0gbnVtO1xuICAgICAgICAgICAgICAvLyBFbnN1cmUgd2FybmluZyB0aHJlc2hvbGQgZG9lc24ndCBleGNlZWQgaWRsZSB0aW1lb3V0XG4gICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy53YXJuaW5nVGhyZXNob2xkU2Vjb25kcyA+IG51bSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndhcm5pbmdUaHJlc2hvbGRTZWNvbmRzID0gbnVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0byB1cGRhdGUgd2FybmluZyB0aHJlc2hvbGQgZGVzY1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlBlbmFsdHkgdHlwZVwiKVxuICAgICAgLnNldERlc2MoXCJXaGF0IGdldHMgZGVsZXRlZCB3aGVuIHlvdSBzdG9wIHR5cGluZ1wiKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKFwiYWxsXCIsIFwiRGVsZXRlIGVudGlyZSBmaWxlXCIpXG4gICAgICAgICAgLmFkZE9wdGlvbihcInBhcmFncmFwaFwiLCBcIkRlbGV0ZSBsYXN0IHBhcmFncmFwaFwiKVxuICAgICAgICAgIC5hZGRPcHRpb24oXCJzZW50ZW5jZVwiLCBcIkRlbGV0ZSBsYXN0IHNlbnRlbmNlXCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBlbmFsdHlUeXBlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IFBlbmFsdHlUeXBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZW5hbHR5VHlwZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiUHJhY3RpY2UgbW9kZVwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiV2hlbiBlbmFibGVkLCB5b3UgY2FuIHJlY292ZXIgY29udGVudCBhZnRlciBhIHBlbmFsdHkuIERpc2FibGUgZm9yIHRoZSByZWFsIGRhbmdlcm91cyBleHBlcmllbmNlIVwiXG4gICAgICApXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmFjdGljZU1vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJhY3RpY2VNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJXYXJuaW5nIHRocmVzaG9sZCAoc2Vjb25kcylcIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBgSG93IGxvbmcgeW91IGNhbiBiZSBpZGxlIGJlZm9yZSB3YXJuaW5ncyBzdGFydCBhcHBlYXJpbmcgKG1heDogJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZGxlVGltZW91dFNlY29uZHN9cylgXG4gICAgICApXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjEuNVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53YXJuaW5nVGhyZXNob2xkU2Vjb25kcy50b1N0cmluZygpKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlRmxvYXQodmFsdWUpIHx8IDEuNTtcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmlkbGVUaW1lb3V0U2Vjb25kcztcbiAgICAgICAgICAgIGlmIChudW0gPiAwICYmIG51bSA8PSBtYXgpIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2FybmluZ1RocmVzaG9sZFNlY29uZHMgPSBudW07XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChudW0gPiBtYXgpIHtcbiAgICAgICAgICAgICAgLy8gQXV0by1hZGp1c3QgdG8gbWF4IGlmIGV4Y2VlZHNcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2FybmluZ1RocmVzaG9sZFNlY29uZHMgPSBtYXg7XG4gICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUobWF4LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJXYXJuaW5nIGNvbG9yXCIpXG4gICAgICAuc2V0RGVzYyhcIkNvbG9yIG9mIHRoZSB3YXJuaW5nIG92ZXJsYXkgd2hlbiBpZGxlIHRpbWUgYXBwcm9hY2hlc1wiKVxuICAgICAgLmFkZENvbG9yUGlja2VyKChjb2xvcikgPT5cbiAgICAgICAgY29sb3JcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2FybmluZ0NvbG9yKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndhcm5pbmdDb2xvciA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVXYXJuaW5nU3R5bGVzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJTdGF0aXN0aWNzXCIgfSk7XG5cbiAgICAvLyBCYXNpYyBzdGF0cyBkaXNwbGF5XG4gICAgY29uc3Qgc2Vzc2lvbnMgPSB0aGlzLnBsdWdpbi5zZXNzaW9ucyB8fCBbXTtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGRheSA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgY29uc3Qgd2VlayA9IDcgKiBkYXk7XG4gICAgY29uc3QgbW9udGggPSAzMCAqIGRheTtcblxuICAgIGNvbnN0IHRvZGF5U2Vzc2lvbnMgPSBzZXNzaW9ucy5maWx0ZXIoKHMpID0+IHMudGltZXN0YW1wID49IG5vdyAtIGRheSk7XG4gICAgY29uc3Qgd2Vla1Nlc3Npb25zID0gc2Vzc2lvbnMuZmlsdGVyKChzKSA9PiBzLnRpbWVzdGFtcCA+PSBub3cgLSB3ZWVrKTtcbiAgICBjb25zdCBtb250aFNlc3Npb25zID0gc2Vzc2lvbnMuZmlsdGVyKChzKSA9PiBzLnRpbWVzdGFtcCA+PSBub3cgLSBtb250aCk7XG5cbiAgICBjb25zdCB0b3RhbFNlc3Npb25zID0gc2Vzc2lvbnMubGVuZ3RoO1xuICAgIGNvbnN0IGNvbXBsZXRlZFNlc3Npb25zID0gc2Vzc2lvbnMuZmlsdGVyKChzKSA9PiBzLmNvbXBsZXRlZCkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsV29yZHMgPSBzZXNzaW9ucy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy53b3Jkc1dyaXR0ZW4sIDApO1xuICAgIGNvbnN0IHRvdGFsVGltZSA9IHNlc3Npb25zLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLmR1cmF0aW9uU2Vjb25kcywgMCk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7XG4gICAgICBjbHM6IFwiZGFuZ2Vyb3VzLXdyaXRpbmctYmFzaWMtc3RhdHNcIixcbiAgICB9KTtcblxuICAgIGlmICh0b3RhbFNlc3Npb25zID4gMCkge1xuICAgICAgY29uc3Qgc3RhdHNHcmlkID0gc3RhdHNDb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBcImRhbmdlcm91cy13cml0aW5nLXN0YXRzLWdyaWRcIixcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNyZWF0ZVN0YXRDYXJkKFxuICAgICAgICBzdGF0c0dyaWQsXG4gICAgICAgIFwiVG90YWwgU2Vzc2lvbnNcIixcbiAgICAgICAgdG90YWxTZXNzaW9ucy50b1N0cmluZygpXG4gICAgICApO1xuICAgICAgdGhpcy5jcmVhdGVTdGF0Q2FyZChcbiAgICAgICAgc3RhdHNHcmlkLFxuICAgICAgICBcIkNvbXBsZXRlZFwiLFxuICAgICAgICBgJHtjb21wbGV0ZWRTZXNzaW9uc30vJHt0b3RhbFNlc3Npb25zfWBcbiAgICAgICk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRDYXJkKFxuICAgICAgICBzdGF0c0dyaWQsXG4gICAgICAgIFwiVG90YWwgV29yZHNcIixcbiAgICAgICAgdG90YWxXb3Jkcy50b0xvY2FsZVN0cmluZygpXG4gICAgICApO1xuICAgICAgdGhpcy5jcmVhdGVTdGF0Q2FyZChcbiAgICAgICAgc3RhdHNHcmlkLFxuICAgICAgICBcIlRvdGFsIFRpbWVcIixcbiAgICAgICAgdGhpcy5mb3JtYXREdXJhdGlvbih0b3RhbFRpbWUpXG4gICAgICApO1xuXG4gICAgICBpZiAodG9kYXlTZXNzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHRvZGF5V29yZHMgPSB0b2RheVNlc3Npb25zLnJlZHVjZShcbiAgICAgICAgICAoc3VtLCBzKSA9PiBzdW0gKyBzLndvcmRzV3JpdHRlbixcbiAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdENhcmQoXG4gICAgICAgICAgc3RhdHNHcmlkLFxuICAgICAgICAgIFwiVG9kYXlcIixcbiAgICAgICAgICBgJHt0b2RheVNlc3Npb25zLmxlbmd0aH0gc2Vzc2lvbnMsICR7dG9kYXlXb3Jkc30gd29yZHNgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRzQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgIHRleHQ6IFwiTm8gc2Vzc2lvbnMgeWV0LiBTdGFydCB3cml0aW5nIGRhbmdlcm91c2x5IVwiLFxuICAgICAgICBjbHM6IFwiZGFuZ2Vyb3VzLXdyaXRpbmctc3RhdHMtZW1wdHlcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJWaWV3IGFsbCBzdGF0aXN0aWNzXCIpXG4gICAgICAuc2V0RGVzYyhcIlNlZSBjb21wcmVoZW5zaXZlIHdyaXRpbmcgaGlzdG9yeSBhbmQgZGV0YWlsZWQgc3RhdHNcIilcbiAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgYnRuLnNldEJ1dHRvblRleHQoXCJWaWV3IEFsbCBTdGF0c1wiKS5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAvLyBDbG9zZSBzZXR0aW5ncyB0byBhdm9pZCBvdmVybGFwLCB0aGVuIG9wZW4gc3RhdHMgdmlld1xuICAgICAgICAgICh0aGlzLmFwcCBhcyBhbnkpLnNldHRpbmc/LmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5wbHVnaW4ub3BlblN0YXRzVmlldygpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25Db25maWcge1xuICBkdXJhdGlvbk1pbnV0ZXM6IG51bWJlciB8IG51bGw7XG4gIHdvcmRDb3VudEdvYWw6IG51bWJlciB8IG51bGw7XG59XG5cbmV4cG9ydCBjbGFzcyBTZXNzaW9uQ29uZmlnTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHJlc3VsdDogU2Vzc2lvbkNvbmZpZyB8IG51bGwgPSBudWxsO1xuICBvblN1Ym1pdDogKHJlc3VsdDogU2Vzc2lvbkNvbmZpZykgPT4gdm9pZDtcbiAgZHVyYXRpb25NaW51dGVzOiBudW1iZXI7XG4gIHdvcmRDb3VudEdvYWw6IG51bWJlcjtcbiAgdXNlV29yZENvdW50OiBib29sZWFuO1xuICBwcmFjdGljZU1vZGU6IGJvb2xlYW47XG4gIHBlbmFsdHlUeXBlOiBcImFsbFwiIHwgXCJwYXJhZ3JhcGhcIiB8IFwic2VudGVuY2VcIjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBkZWZhdWx0RHVyYXRpb246IG51bWJlcixcbiAgICBkZWZhdWx0V29yZENvdW50OiBudW1iZXIsXG4gICAgaGFzRXhpc3RpbmdDb250ZW50OiBib29sZWFuLFxuICAgIHByYWN0aWNlTW9kZTogYm9vbGVhbixcbiAgICBwZW5hbHR5VHlwZTogXCJhbGxcIiB8IFwicGFyYWdyYXBoXCIgfCBcInNlbnRlbmNlXCIsXG4gICAgb25TdWJtaXQ6IChyZXN1bHQ6IFNlc3Npb25Db25maWcpID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG4gICAgdGhpcy5kdXJhdGlvbk1pbnV0ZXMgPSBkZWZhdWx0RHVyYXRpb247XG4gICAgdGhpcy53b3JkQ291bnRHb2FsID0gZGVmYXVsdFdvcmRDb3VudDtcbiAgICB0aGlzLnVzZVdvcmRDb3VudCA9IGRlZmF1bHRXb3JkQ291bnQgPiAwO1xuICAgIHRoaXMucHJhY3RpY2VNb2RlID0gcHJhY3RpY2VNb2RlO1xuICAgIHRoaXMucGVuYWx0eVR5cGUgPSBwZW5hbHR5VHlwZTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoXCJkdy1tb2RhbFwiKTtcblxuICAgIHRoaXMuc2V0VGl0bGUoXCJTdGFydCBaYXAgU2Vzc2lvblwiKTtcblxuICAgIC8vIEJyaWVmIHdhcm5pbmcgbGluZVxuICAgIGNvbnN0IHBlbmFsdHlUZXh0ID1cbiAgICAgIHRoaXMucGVuYWx0eVR5cGUgPT09IFwiYWxsXCJcbiAgICAgICAgPyBcImV2ZXJ5dGhpbmdcIlxuICAgICAgICA6IHRoaXMucGVuYWx0eVR5cGUgPT09IFwicGFyYWdyYXBoXCJcbiAgICAgICAgPyBcInRoZSBsYXN0IHBhcmFncmFwaFwiXG4gICAgICAgIDogXCJ0aGUgbGFzdCBzZW50ZW5jZVwiO1xuXG4gICAgaWYgKHRoaXMucHJhY3RpY2VNb2RlKSB7XG4gICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgdGV4dDogYFByYWN0aWNlIG1vZGUgaXMgT04gXHUyMDE0IHN0b3BwaW5nIHdpbGwgZGVsZXRlICR7cGVuYWx0eVRleHR9LCBidXQgeW91IGNhbiByZWNvdmVyIGl0LmAsXG4gICAgICAgIGNsczogXCJkYW5nZXJvdXMtd3JpdGluZy13YXJuaW5nLXRleHRcIixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgdGV4dDogYE5vdCBpbiBwcmFjdGljZSBtb2RlIFx1MjAxNCBpZiB5b3Ugc3RvcCB0eXBpbmcsIHlvdSBsb3NlICR7cGVuYWx0eVRleHR9IWAsXG4gICAgICAgIGNsczogXCJkYW5nZXJvdXMtd3JpdGluZy13YXJuaW5nLXRleHRcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNlZ21lbnRlZCB0b2dnbGUgKE1pbnV0ZXMgLyBXb3JkcylcbiAgICBjb25zdCBzZWcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImR3LXNlZ1wiIH0pO1xuICAgIGNvbnN0IG1pbnV0ZXNCdG4gPSBzZWcuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdGV4dDogXCJNaW51dGVzXCIsXG4gICAgICBjbHM6IFwiZHctc2VnLWJ0blwiLFxuICAgIH0pO1xuICAgIGNvbnN0IHdvcmRzQnRuID0gc2VnLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIHRleHQ6IFwiV29yZHNcIixcbiAgICAgIGNsczogXCJkdy1zZWctYnRuXCIsXG4gICAgfSk7XG5cbiAgICAvLyBQaWNrZXIgYXJlYVxuICAgIGNvbnN0IHBpY2tlciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiZHctcGlja2VyXCIgfSk7XG5cbiAgICBjb25zdCBzZXRBY3RpdmVDaGlwID0gKHdyYXA6IEhUTUxFbGVtZW50LCB2YWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgICB3cmFwLnF1ZXJ5U2VsZWN0b3JBbGwoXCJidXR0b24uZHctY2hpcFwiKS5mb3JFYWNoKChiKSA9PiB7XG4gICAgICAgIGNvbnN0IGJ0biA9IGIgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtYWN0aXZlXCIsIGJ0bi5kYXRhc2V0LnZhbHVlID09PSBTdHJpbmcodmFsdWUpKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0eXBlIE1vZGUgPSBcIm1pbnV0ZXNcIiB8IFwid29yZHNcIjtcblxuICAgIGNvbnN0IENPTkZJRzogUmVjb3JkPFxuICAgICAgTW9kZSxcbiAgICAgIHtcbiAgICAgICAgcHJlc2V0czogbnVtYmVyW107XG4gICAgICAgIHVuaXQ6IHN0cmluZztcbiAgICAgICAgZ2V0OiAoKSA9PiBudW1iZXI7XG4gICAgICAgIHNldDogKG46IG51bWJlcikgPT4gdm9pZDtcbiAgICAgIH1cbiAgICA+ID0ge1xuICAgICAgbWludXRlczoge1xuICAgICAgICBwcmVzZXRzOiBbNSwgMTAsIDE1LCAyMCwgMzBdLFxuICAgICAgICB1bml0OiBcIm1pblwiLFxuICAgICAgICBnZXQ6ICgpID0+IHRoaXMuZHVyYXRpb25NaW51dGVzIHx8IDUsXG4gICAgICAgIHNldDogKG4pID0+ICh0aGlzLmR1cmF0aW9uTWludXRlcyA9IG4pLFxuICAgICAgfSxcbiAgICAgIHdvcmRzOiB7XG4gICAgICAgIHByZXNldHM6IFsxMDAsIDI1MCwgNTAwLCA3NTAsIDEwMDBdLFxuICAgICAgICB1bml0OiBcIndvcmRzXCIsXG4gICAgICAgIGdldDogKCkgPT4gKHRoaXMud29yZENvdW50R29hbCA+IDAgPyB0aGlzLndvcmRDb3VudEdvYWwgOiA1MDApLFxuICAgICAgICBzZXQ6IChuKSA9PiAodGhpcy53b3JkQ291bnRHb2FsID0gbiksXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBsZXQgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIGxldCBjaGlwc1dyYXA6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdCByZW5kZXJQaWNrZXIgPSAobW9kZTogTW9kZSkgPT4ge1xuICAgICAgbWludXRlc0J0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtYWN0aXZlXCIsIG1vZGUgPT09IFwibWludXRlc1wiKTtcbiAgICAgIHdvcmRzQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1hY3RpdmVcIiwgbW9kZSA9PT0gXCJ3b3Jkc1wiKTtcblxuICAgICAgcGlja2VyLmVtcHR5KCk7XG5cbiAgICAgIGNoaXBzV3JhcCA9IHBpY2tlci5jcmVhdGVEaXYoeyBjbHM6IFwiZHctY2hpcHNcIiB9KTtcbiAgICAgIGZvciAoY29uc3QgcHJlc2V0IG9mIENPTkZJR1ttb2RlXS5wcmVzZXRzKSB7XG4gICAgICAgIGNvbnN0IGJ0biA9IGNoaXBzV3JhcC5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgdGV4dDogU3RyaW5nKHByZXNldCksXG4gICAgICAgICAgY2xzOiBcImR3LWNoaXBcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGJ0bi5kYXRhc2V0LnZhbHVlID0gU3RyaW5nKHByZXNldCk7XG4gICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIENPTkZJR1ttb2RlXS5zZXQocHJlc2V0KTtcbiAgICAgICAgICBpZiAoaW5wdXRFbCkgaW5wdXRFbC52YWx1ZSA9IFN0cmluZyhwcmVzZXQpO1xuICAgICAgICAgIGlmIChjaGlwc1dyYXApIHNldEFjdGl2ZUNoaXAoY2hpcHNXcmFwLCBwcmVzZXQpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCByb3cgPSBwaWNrZXIuY3JlYXRlRGl2KHsgY2xzOiBcImR3LWlucHV0LXJvd1wiIH0pO1xuICAgICAgaW5wdXRFbCA9IHJvdy5jcmVhdGVFbChcImlucHV0XCIsIHtcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgIGNsczogXCJkdy1pbnB1dFwiLFxuICAgICAgICB2YWx1ZTogU3RyaW5nKENPTkZJR1ttb2RlXS5nZXQoKSksXG4gICAgICB9KTtcbiAgICAgIGlucHV0RWwuc2V0QXR0cmlidXRlKFwiaW5wdXRtb2RlXCIsIFwibnVtZXJpY1wiKTtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQoaW5wdXRFbCEudmFsdWUpO1xuICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID4gMCkge1xuICAgICAgICAgIENPTkZJR1ttb2RlXS5zZXQobnVtKTtcbiAgICAgICAgICBpZiAoY2hpcHNXcmFwKSBzZXRBY3RpdmVDaGlwKGNoaXBzV3JhcCwgbnVtKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByb3cuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogQ09ORklHW21vZGVdLnVuaXQsIGNsczogXCJkdy11bml0XCIgfSk7XG5cbiAgICAgIHNldEFjdGl2ZUNoaXAoY2hpcHNXcmFwLCBDT05GSUdbbW9kZV0uZ2V0KCkpO1xuICAgIH07XG5cbiAgICBjb25zdCBzZXRNb2RlID0gKG1vZGU6IE1vZGUpID0+IHtcbiAgICAgIHRoaXMudXNlV29yZENvdW50ID0gbW9kZSA9PT0gXCJ3b3Jkc1wiO1xuICAgICAgcmVuZGVyUGlja2VyKG1vZGUpO1xuICAgIH07XG5cbiAgICBtaW51dGVzQnRuLm9uY2xpY2sgPSAoKSA9PiBzZXRNb2RlKFwibWludXRlc1wiKTtcbiAgICB3b3Jkc0J0bi5vbmNsaWNrID0gKCkgPT4gc2V0TW9kZShcIndvcmRzXCIpO1xuICAgIHNldE1vZGUodGhpcy51c2VXb3JkQ291bnQgPyBcIndvcmRzXCIgOiBcIm1pbnV0ZXNcIik7XG5cbiAgICAvLyBCdXR0b25zXG4gICAgY29uc3QgYnRuUm93ID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJkdy1idG4tcm93XCIgfSk7XG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnRuUm93LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIHRleHQ6IFwiQ2FuY2VsXCIsXG4gICAgICBjbHM6IFwiZHctYnRuXCIsXG4gICAgfSk7XG4gICAgY2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG5cbiAgICBjb25zdCBzdGFydEJ0biA9IGJ0blJvdy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0ZXh0OiBcIlN0YXJ0IFphcCBTZXNzaW9uXCIsXG4gICAgICBjbHM6IFwiZHctYnRuIGR3LWJ0bi1jdGFcIixcbiAgICB9KTtcbiAgICBzdGFydEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMudXNlV29yZENvdW50ICYmIHRoaXMud29yZENvdW50R29hbCA8PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCB3b3JkIGNvdW50IGdvYWxcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy51c2VXb3JkQ291bnQgJiYgdGhpcy5kdXJhdGlvbk1pbnV0ZXMgPD0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgZHVyYXRpb25cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVzdWx0ID0ge1xuICAgICAgICBkdXJhdGlvbk1pbnV0ZXM6IHRoaXMudXNlV29yZENvdW50ID8gbnVsbCA6IHRoaXMuZHVyYXRpb25NaW51dGVzLFxuICAgICAgICB3b3JkQ291bnRHb2FsOiB0aGlzLnVzZVdvcmRDb3VudCA/IHRoaXMud29yZENvdW50R29hbCA6IG51bGwsXG4gICAgICB9O1xuICAgICAgdGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlyc3RUaW1lV2FybmluZ01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBvbkNvbmZpcm06ICgpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICB0aGlzLnNldFRpdGxlKFwiXHUyNkEwXHVGRTBGIFphcFwiKTtcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgdGV4dDogXCJUaGlzIHBsdWdpbiBkZWxldGVzIGNvbnRlbnQgaWYgeW91IHN0b3AgdHlwaW5nLiBQcmFjdGljZSBtb2RlIGlzIE9OIGJ5IGRlZmF1bHQuXCIsXG4gICAgICBjbHM6IFwiZHctc3VidGl0bGVcIixcbiAgICB9KTtcblxuICAgIGNvbnN0IGxpc3QgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJ1bFwiLCB7IGNsczogXCJkdy13YXJuaW5nLWxpc3RcIiB9KTtcbiAgICBsaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiBcIkNvbnRlbnQgaXMgcmVjb3ZlcmFibGUgaW4gcHJhY3RpY2UgbW9kZVwiIH0pO1xuICAgIGxpc3QuY3JlYXRlRWwoXCJsaVwiLCB7IHRleHQ6IFwiVGVzdCBpbiBhIHNhZmUgdmF1bHQgZmlyc3RcIiB9KTtcbiAgICBsaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiBcIlN3aXRjaGluZyBmaWxlcyBtYXkgZW5kIHRoZSBzZXNzaW9uXCIgfSk7XG5cbiAgICBjb25zdCBidG5Sb3cgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImR3LWJ0bi1yb3dcIiB9KTtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidG5Sb3cuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdGV4dDogXCJDYW5jZWxcIixcbiAgICAgIGNsczogXCJkdy1idG5cIixcbiAgICB9KTtcbiAgICBjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcblxuICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBidG5Sb3cuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdGV4dDogXCJJIFVuZGVyc3RhbmRcIixcbiAgICAgIGNsczogXCJkdy1idG4gZHctYnRuLWN0YVwiLFxuICAgIH0pO1xuICAgIGNvbmZpcm1CdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfU1RBVFMgPSBcImRhbmdlcm91cy13cml0aW5nLXN0YXRzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvblJlY29yZCB7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICBkdXJhdGlvblNlY29uZHM6IG51bWJlcjtcbiAgd29yZHNXcml0dGVuOiBudW1iZXI7XG4gIGNvbXBsZXRlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFN0YXRzVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcHJpdmF0ZSBzZXNzaW9uczogU2Vzc2lvblJlY29yZFtdO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHNlc3Npb25zOiBTZXNzaW9uUmVjb3JkW10pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnNlc3Npb25zID0gc2Vzc2lvbnM7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfU1RBVFM7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlphcCBTdGF0c1wiO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImJhci1jaGFydC0yXCI7XG4gIH1cblxuICB1cGRhdGVTZXNzaW9ucyhzZXNzaW9uczogU2Vzc2lvblJlY29yZFtdKSB7XG4gICAgdGhpcy5zZXNzaW9ucyA9IHNlc3Npb25zO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICBjb250YWluZXIuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiWmFwIFN0YXRpc3RpY3NcIiB9KTtcblxuICAgIC8vIFRpbWUgcGVyaW9kIGZpbHRlcnNcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGRheSA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgY29uc3Qgd2VlayA9IDcgKiBkYXk7XG4gICAgY29uc3QgbW9udGggPSAzMCAqIGRheTtcblxuICAgIGNvbnN0IHBlcmlvZHMgPSBbXG4gICAgICB7IG5hbWU6IFwiVG9kYXlcIiwgc3RhcnQ6IG5vdyAtIGRheSB9LFxuICAgICAgeyBuYW1lOiBcIlBhc3QgV2Vla1wiLCBzdGFydDogbm93IC0gd2VlayB9LFxuICAgICAgeyBuYW1lOiBcIlBhc3QgTW9udGhcIiwgc3RhcnQ6IG5vdyAtIG1vbnRoIH0sXG4gICAgICB7IG5hbWU6IFwiQWxsIFRpbWVcIiwgc3RhcnQ6IDAgfSxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBwZXJpb2Qgb2YgcGVyaW9kcykge1xuICAgICAgY29uc3QgcGVyaW9kU2Vzc2lvbnMgPSB0aGlzLnNlc3Npb25zLmZpbHRlcihcbiAgICAgICAgKHMpID0+IHMudGltZXN0YW1wID49IHBlcmlvZC5zdGFydFxuICAgICAgKTtcbiAgICAgIHRoaXMucmVuZGVyUGVyaW9kU3RhdHMoY29udGFpbmVyLCBwZXJpb2QubmFtZSwgcGVyaW9kU2Vzc2lvbnMpO1xuICAgIH1cblxuICAgIC8vIFJlY2VudCBzZXNzaW9ucyBsaXN0XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlJlY2VudCBTZXNzaW9uc1wiIH0pO1xuXG4gICAgaWYgKHRoaXMuc2Vzc2lvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgdGV4dDogXCJObyBzZXNzaW9ucyB5ZXQuIFN0YXJ0IGEgWmFwIHNlc3Npb24hXCIsXG4gICAgICAgIGNsczogXCJkYW5nZXJvdXMtd3JpdGluZy1zdGF0cy1lbXB0eVwiLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlY2VudFNlc3Npb25zID0gdGhpcy5zZXNzaW9ucy5zbGljZSgtMTApLnJldmVyc2UoKTtcbiAgICAgIGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICBjbHM6IFwiZGFuZ2Vyb3VzLXdyaXRpbmctc2Vzc2lvbnMtbGlzdFwiLFxuICAgICAgfSk7XG5cbiAgICAgIGZvciAoY29uc3Qgc2Vzc2lvbiBvZiByZWNlbnRTZXNzaW9ucykge1xuICAgICAgICBjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgICAgY2xzOiBcImRhbmdlcm91cy13cml0aW5nLXNlc3Npb24taXRlbVwiLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHNlc3Npb24udGltZXN0YW1wKTtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gc2Vzc2lvbi5jb21wbGV0ZWQgPyBcIlx1MjcwNVwiIDogXCJcdTI3NENcIjtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLmZvcm1hdER1cmF0aW9uKHNlc3Npb24uZHVyYXRpb25TZWNvbmRzKTtcblxuICAgICAgICBpdGVtLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICAgICAgdGV4dDogYCR7c3RhdHVzfSAke2RhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCl9ICR7ZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIHsgaG91cjogXCIyLWRpZ2l0XCIsIG1pbnV0ZTogXCIyLWRpZ2l0XCIgfVxuICAgICAgICAgICl9YCxcbiAgICAgICAgICBjbHM6IFwic2Vzc2lvbi1kYXRlXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICAgICAgdGV4dDogYCR7c2Vzc2lvbi53b3Jkc1dyaXR0ZW59IHdvcmRzYCxcbiAgICAgICAgICBjbHM6IFwic2Vzc2lvbi13b3Jkc1wiLFxuICAgICAgICB9KTtcbiAgICAgICAgaXRlbS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICAgIHRleHQ6IGR1cmF0aW9uLFxuICAgICAgICAgIGNsczogXCJzZXNzaW9uLWR1cmF0aW9uXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUGVyaW9kU3RhdHMoXG4gICAgY29udGFpbmVyOiBFbGVtZW50LFxuICAgIHBlcmlvZE5hbWU6IHN0cmluZyxcbiAgICBzZXNzaW9uczogU2Vzc2lvblJlY29yZFtdXG4gICkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcImRhbmdlcm91cy13cml0aW5nLXN0YXRzLXBlcmlvZFwiLFxuICAgIH0pO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IHBlcmlvZE5hbWUgfSk7XG5cbiAgICBjb25zdCB0b3RhbFNlc3Npb25zID0gc2Vzc2lvbnMubGVuZ3RoO1xuICAgIGNvbnN0IGNvbXBsZXRlZFNlc3Npb25zID0gc2Vzc2lvbnMuZmlsdGVyKChzKSA9PiBzLmNvbXBsZXRlZCkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsV29yZHMgPSBzZXNzaW9ucy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy53b3Jkc1dyaXR0ZW4sIDApO1xuICAgIGNvbnN0IHRvdGFsVGltZSA9IHNlc3Npb25zLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLmR1cmF0aW9uU2Vjb25kcywgMCk7XG5cbiAgICBjb25zdCBzdGF0c0dyaWQgPSBzZWN0aW9uLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJkYW5nZXJvdXMtd3JpdGluZy1zdGF0cy1ncmlkXCIsXG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVN0YXRDYXJkKHN0YXRzR3JpZCwgXCJTZXNzaW9uc1wiLCB0b3RhbFNlc3Npb25zLnRvU3RyaW5nKCkpO1xuICAgIHRoaXMuY3JlYXRlU3RhdENhcmQoXG4gICAgICBzdGF0c0dyaWQsXG4gICAgICBcIkNvbXBsZXRlZFwiLFxuICAgICAgYCR7Y29tcGxldGVkU2Vzc2lvbnN9LyR7dG90YWxTZXNzaW9uc31gXG4gICAgKTtcbiAgICB0aGlzLmNyZWF0ZVN0YXRDYXJkKFxuICAgICAgc3RhdHNHcmlkLFxuICAgICAgXCJXb3JkcyBXcml0dGVuXCIsXG4gICAgICB0b3RhbFdvcmRzLnRvTG9jYWxlU3RyaW5nKClcbiAgICApO1xuICAgIHRoaXMuY3JlYXRlU3RhdENhcmQoXG4gICAgICBzdGF0c0dyaWQsXG4gICAgICBcIlRpbWUgV3JpdGluZ1wiLFxuICAgICAgdGhpcy5mb3JtYXREdXJhdGlvbih0b3RhbFRpbWUpXG4gICAgKTtcblxuICAgIGlmICh0b3RhbFNlc3Npb25zID4gMCkge1xuICAgICAgY29uc3QgYXZnV29yZHMgPSBNYXRoLnJvdW5kKHRvdGFsV29yZHMgLyB0b3RhbFNlc3Npb25zKTtcbiAgICAgIGNvbnN0IGNvbXBsZXRpb25SYXRlID0gTWF0aC5yb3VuZChcbiAgICAgICAgKGNvbXBsZXRlZFNlc3Npb25zIC8gdG90YWxTZXNzaW9ucykgKiAxMDBcbiAgICAgICk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRDYXJkKHN0YXRzR3JpZCwgXCJBdmcgV29yZHMvU2Vzc2lvblwiLCBhdmdXb3Jkcy50b1N0cmluZygpKTtcbiAgICAgIHRoaXMuY3JlYXRlU3RhdENhcmQoc3RhdHNHcmlkLCBcIkNvbXBsZXRpb24gUmF0ZVwiLCBgJHtjb21wbGV0aW9uUmF0ZX0lYCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTdGF0Q2FyZChjb250YWluZXI6IEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJkYW5nZXJvdXMtd3JpdGluZy1zdGF0LWNhcmRcIixcbiAgICB9KTtcbiAgICBjYXJkLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogdmFsdWUsIGNsczogXCJzdGF0LXZhbHVlXCIgfSk7XG4gICAgY2FyZC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGxhYmVsLCBjbHM6IFwic3RhdC1sYWJlbFwiIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXREdXJhdGlvbihzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICBjb25zdCBzZWNzID0gc2Vjb25kcyAlIDYwO1xuXG4gICAgaWYgKGhvdXJzID4gMCkge1xuICAgICAgcmV0dXJuIGAke2hvdXJzfWggJHttaW51dGVzfW1gO1xuICAgIH0gZWxzZSBpZiAobWludXRlcyA+IDApIHtcbiAgICAgIHJldHVybiBgJHttaW51dGVzfW0gJHtzZWNzfXNgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYCR7c2Vjc31zYDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIE5vdGhpbmcgdG8gY2xlYW4gdXBcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQU9POzs7QUNOUCxzQkFBK0M7QUFleEMsSUFBTSxtQkFBNkM7QUFBQSxFQUN4RCx3QkFBd0I7QUFBQSxFQUN4QixzQkFBc0I7QUFBQTtBQUFBLEVBQ3RCLG9CQUFvQjtBQUFBLEVBQ3BCLGNBQWM7QUFBQSxFQUNkLHlCQUF5QjtBQUFBLEVBQ3pCLHNCQUFzQjtBQUFBLEVBQ3RCLGFBQWE7QUFBQSxFQUNiLGNBQWM7QUFDaEI7QUFFTyxJQUFNLDZCQUFOLGNBQXlDLGlDQUFpQjtBQUFBLEVBRy9ELFlBQVksS0FBVSxRQUFnQztBQUNwRCxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNoQjtBQUFB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QUFBQSxJQUNGLE9BQU87QUFFTCxZQUFNLFVBQVUsS0FBSyxJQUFJLElBQUksS0FBSztBQUNsQyxZQUFNLFlBQVksS0FBSyxJQUFJLEdBQUcsS0FBSyxvQkFBb0IsT0FBTztBQUM5RCxZQUFNLG1CQUFtQixLQUFLLE1BQU0sWUFBWSxHQUFLO0FBQ3JELFlBQU0sbUJBQW1CLEtBQUssTUFBTyxZQUFZLE1BQVMsR0FBSTtBQUM5RCxtQkFBYSxnQkFBTSxvQkFBb0IsT0FBTyxnQkFBZ0IsRUFBRTtBQUFBLFFBQzlEO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBSUEsUUFBSSxlQUFlLEtBQUssU0FBUyx5QkFBeUI7QUFDeEQsb0JBQWMsbUJBQVM7QUFDdkIsV0FBSyxZQUFZLFlBQ2Y7QUFBQSxJQUNKLE9BQU87QUFDTCxvQkFBYyxNQUFNO0FBQ3BCLFdBQUssWUFBWSxZQUFZO0FBQUEsSUFDL0I7QUFFQSxTQUFLLFlBQVksUUFBUSxVQUFVO0FBQUEsRUFDckM7QUFBQSxFQUVRLFdBQVcsTUFBc0I7QUFDdkMsV0FBTyxLQUNKLEtBQUssRUFDTCxNQUFNLEtBQUssRUFDWCxPQUFPLENBQUMsU0FBUyxLQUFLLFNBQVMsQ0FBQyxFQUFFO0FBQUEsRUFDdkM7QUFBQSxFQUVRLFVBQVU7QUFDaEIsU0FBSyxxQkFBcUI7QUFDMUIsUUFBSSxLQUFLLGFBQWE7QUFDcEIsV0FBSyxZQUFZLE9BQU87QUFDeEIsV0FBSyxjQUFjO0FBQUEsSUFDckI7QUFDQSxRQUFJLEtBQUssU0FBUztBQUNoQixXQUFLLFFBQVEsT0FBTztBQUNwQixXQUFLLFVBQVU7QUFBQSxJQUNqQjtBQUFBLEVBQ0Y7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
